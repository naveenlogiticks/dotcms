(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+1To":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),l=n("nQGg"),o=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function s(t){return i["\u0275vid"](0,[],null,null)}function r(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-grid-placeholder",[],null,null,null,s,o)),i["\u0275did"](1,114688,null,0,l.d,[i.ElementRef,i.Renderer],null,null)],function(t,e){t(e,1,0)},null)}var a=i["\u0275ccf"]("ng-grid-placeholder",l.d,r,{},{},[])},"+Urz":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},"0rnf":function(t,e,n){"use strict";var i;!function(t){t.FILE="FILE",t.DB="DB"}(i||(i={})),n.d(e,"a",function(){return l});var l=function(){function t(){}return t.prototype.set=function(t){this.containers=t},t.prototype.get=function(t){return this.containers[t]?this.containers[t].container:null},t.prototype.getContainerReference=function(t){return t.source===i.FILE?t.path:t.identifier},t}()},"9WhO":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},A3ee:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},"B/FT":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},BjIa:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("sE5F"),l=n("FYXD"),o=n("67Y/"),s=n("LkmY"),r=function(){function t(t){this.coreWebService=t}return t.prototype.save=function(t,e){return this.coreWebService.requestView({body:e,method:i.k.Post,url:"v1/page/"+t+"/layout"}).pipe(Object(l.a)("entity"),Object(o.a)(function(t){return new s.b(t)}))},t}()},CA3l:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n("o0I2");var i=function(){return function(){}}()},EWNG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},IMHx:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n("0rnf");var i=n("8MWF"),l=n("K9Ia"),o=function(){function t(t){this.templateContainersCacheService=t,this._addGridBox=new l.a}return t.prototype.getDotLayoutGridBox=function(t){var e=this,n=[];return t.rows.forEach(function(t,l){t.columns.forEach(function(t){n.push({containers:e.getDotContainerColumnBoxFromDotPageContainer(t.containers),config:Object.assign(i.b.getDefaultConfig(),{sizex:t.width,col:t.leftOffset,row:l+1,payload:t})})})}),new i.b(n,t.rows.map(function(t){return t.styleClass}))},t.prototype.getDotLayoutBody=function(t){var e=this;return{rows:t.getRows().map(function(t){return e.getLayoutRowFromLayoutGridBoxes(t)})}},t.prototype.getDotLayoutSidebar=function(t){return this.getDotContainerColumnBoxFromDotPageContainer(t)},t.prototype.addBox=function(){this._addGridBox.next(!0)},t.prototype.getBoxes=function(){return this._addGridBox.asObservable()},t.prototype.getDotContainerColumnBoxFromDotPageContainer=function(t){var e=this;return t.filter(function(t){return e.templateContainersCacheService.get(t.identifier)}).map(function(t){return{container:e.templateContainersCacheService.get(t.identifier),uuid:t.uuid?t.uuid:""}})},t.prototype.getLayoutRowFromLayoutGridBoxes=function(t){return{styleClass:t.styleClass,columns:t.boxes.map(this.getColumn.bind(this))}},t.prototype.getColumn=function(t){return{styleClass:t.config.payload.styleClass,leftOffset:t.config.col,width:t.config.sizex,containers:t.containers.filter(function(t){return t.container}).map(this.getContainer.bind(this))}},t.prototype.getContainer=function(t){return{identifier:this.templateContainersCacheService.getContainerReference(t.container),uuid:t.uuid}},t}()},QgEQ:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},ekOy:function(t,e,n){"use strict";var i=n("CcnG"),l=n("Ip0R"),o=n("U+Us"),s=n("7RGE"),r=n("n4iu"),a=n("3MPT"),u=n("OgJT"),d=n("3EUd"),c=n("pI6q"),h=n("648g"),g=n("Ne6k"),p=n("Fa87"),m=n("gIcY"),f=n("FqzU"),_=n("7LN8"),v=(n("nciF"),n("mU/a")),y=n("3mRq"),C=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function b(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ui-datagrid-header ui-widget-header ui-corner-top"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],null,null)}function x(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"p-paginator",[["styleClass","ui-paginator-top"]],null,[[null,"onPageChange"]],function(t,e,n){var i=!0;return"onPageChange"===e&&(i=!1!==t.component.paginate(n)&&i),i},y.b,y.a)),i["\u0275did"](1,114688,null,0,v.Paginator,[],{pageLinkSize:[0,"pageLinkSize"],styleClass:[1,"styleClass"],alwaysShow:[2,"alwaysShow"],dropdownAppendTo:[3,"dropdownAppendTo"],totalRecords:[4,"totalRecords"],first:[5,"first"],rows:[6,"rows"],rowsPerPageOptions:[7,"rowsPerPageOptions"]},{onPageChange:"onPageChange"})],function(t,e){var n=e.component;t(e,1,0,n.pageLinks,"ui-paginator-top",n.alwaysShowPaginator,n.paginatorDropdownAppendTo,n.totalRecords,n.first,n.rows,n.rowsPerPageOptions)},null)}function w(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](0,null,null,0))],null,null)}function S(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ui-widget-content ui-g-12"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.emptyMessage)})}function E(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"p-paginator",[["styleClass","ui-paginator-bottom"]],null,[[null,"onPageChange"]],function(t,e,n){var i=!0;return"onPageChange"===e&&(i=!1!==t.component.paginate(n)&&i),i},y.b,y.a)),i["\u0275did"](1,114688,null,0,v.Paginator,[],{pageLinkSize:[0,"pageLinkSize"],styleClass:[1,"styleClass"],alwaysShow:[2,"alwaysShow"],dropdownAppendTo:[3,"dropdownAppendTo"],totalRecords:[4,"totalRecords"],first:[5,"first"],rows:[6,"rows"],rowsPerPageOptions:[7,"rowsPerPageOptions"]},{onPageChange:"onPageChange"})],function(t,e){var n=e.component;t(e,1,0,n.pageLinks,"ui-paginator-bottom",n.alwaysShowPaginator,n.paginatorDropdownAppendTo,n.totalRecords,n.first,n.rows,n.rowsPerPageOptions)},null)}function R(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","ui-datagrid-footer ui-widget-footer ui-corner-bottom"]],null,null,null,null,null)),i["\u0275ncd"](null,1)],null,null)}function z(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,16,"div",[],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275did"](2,278528,null,0,l.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](4,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,x)),i["\u0275did"](6,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](7,0,null,null,5,"div",[["class","ui-datagrid-content ui-widget-content"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,4,"div",[["class","ui-g"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,w)),i["\u0275did"](10,278528,null,0,l.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"],ngForTemplate:[2,"ngForTemplate"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](12,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,E)),i["\u0275did"](14,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,R)),i["\u0275did"](16,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.styleClass,"ui-datagrid ui-widget"),t(e,2,0,n.style),t(e,4,0,n.header),t(e,6,0,n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),t(e,10,0,n.dataToRender,n.trackBy,n.itemTemplate),t(e,12,0,n.isEmpty()),t(e,14,0,n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),t(e,16,0,n.footer)},null)}var M=n("bne5"),P=n("t9fZ"),I=n("Gi3i"),D=n("UKYB"),O=(n("9aqM"),n("dGNY"),function(){return(O=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var l in e=arguments[n])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t}).apply(this,arguments)}),G=function(){function t(t,e,n){this.dotMessageService=t,this.paginatorService=e,this.siteService=n,this.selected=new i.EventEmitter,this.close=new i.EventEmitter,this.visible=!0}return t.prototype.ngOnInit=function(){var t=this;this.dotMessageService.getMessages(["editpage.layout.theme.header","editpage.layout.theme.search","editpage.layout.theme.no.records.found","dot.common.apply","dot.common.cancel"]).pipe(Object(P.a)(1)).subscribe(function(){t.dialogActions={accept:{label:t.dotMessageService.get("dot.common.apply"),disabled:!0,action:function(){t.apply()}},cancel:{label:t.dotMessageService.get("dot.common.cancel")}}}),this.paginatorService.url="v1/themes",this.paginatorService.setExtraParams("hostId",this.siteService.currentSite.identifier),this.paginatorService.paginationPerPage=8,this.current=this.value,Object(M.a)(this.searchInput.nativeElement,"keyup").pipe(Object(I.a)(500)).subscribe(function(e){t.filterThemes(e.target.value)})},t.prototype.paginate=function(t){this.themes=this.paginatorService.getWithOffset(t.first),this.datagrid.first=t.first},t.prototype.siteChange=function(t){this.searchInput.nativeElement.value=null,this.paginatorService.setExtraParams("hostId",t.identifier),this.paginatorService.setExtraParams("searchParam",""),this.paginate({first:0})},t.prototype.selectTheme=function(t){this.current=t,this.dialogActions=O({},this.dialogActions,{accept:O({},this.dialogActions.accept,{disabled:this.value.inode===this.current.inode})})},t.prototype.apply=function(){this.selected.emit(this.current)},t.prototype.hideDialog=function(){this.close.emit(!1)},t.prototype.filterThemes=function(t){this.paginatorService.setExtraParams("searchParam",t),this.paginate({first:0})},t}(),T=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]     dot-site-selector{margin-left:12px}[_nghost-%COMP%]     dot-site-selector .site-selector__title, [_nghost-%COMP%]     dot-site-selector dot-searchable-dropdown .ui-button{font-size:16px;min-width:200px}[_nghost-%COMP%]     .dialog__content{min-width:1096px;padding:17px 20px 24px}@media (max-width:1100px){[_nghost-%COMP%]     .dialog__content{min-width:calc(100vw - 5vw)!important}}[_nghost-%COMP%]     .ui-datagrid-content .ui-g{margin:0}[_nghost-%COMP%]     .ui-datagrid-content .ui-widget-content.ui-g-12{text-align:center;font-size:16px;margin-top:40px}[_nghost-%COMP%]     .paginator .dot-theme-container .ui-datagrid{padding-bottom:56px;position:relative}.dot-theme-container[_ngcontent-%COMP%]{margin-top:8px}.dot-theme-search-box[_ngcontent-%COMP%]{display:inline-block;width:200px;margin-left:24px;position:relative}.dot-theme-search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}.dot-theme-item[_ngcontent-%COMP%]{align-items:center;background:#f1f3f4;border-radius:4px;cursor:pointer;display:flex;flex-direction:column;height:240px;margin:24px 12px 0;padding:24px 16px;transition:background-color 150ms ease-in;width:240px}.dot-theme-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#7e7a86;border-radius:6px}.dot-theme-item.active[_ngcontent-%COMP%], .dot-theme-item[_ngcontent-%COMP%]:hover{box-shadow:0 10px 24px 0 rgba(0,0,0,.2);background:#fff}.dot-theme-iteme__image[_ngcontent-%COMP%]{border-radius:6px}"]],data:{}});function N(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,":svg:svg",[["fill","none"],["height","130"],["viewBox","0 0 130 130"],["width","130"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,0,":svg:path",[["d","M130 121.56V7.5045C130 -0.439943 129.445 0.00450051 121.514 0.00450051H6.19998C-1.73165 0.00450051 0.209671 0.00450039 0.209671 7.5045V121.56C0.209671 129.505 -1.73165 130.005 6.19998 130.005H121.514C129.445 130.005 130 129.505 130 121.56ZM39.8678 75.8378L57.8943 97.5767L83.1313 65.0045L115.579 108.338H14.6308L39.8678 75.8378Z"],["transform","translate(0.789978 0.995499)"]],null,null,null,null,null))],null,null)}function k(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"img",[["class","dot-theme-iteme__image"]],[[8,"src",4]],null,null,null,null))],null,function(t,e){t(e,0,0,i["\u0275inlineInterpolate"](1,"/dA/",e.parent.context.$implicit.themeThumbnail,"/130w/130h/thumbnail.png"))})}function H(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,8,"div",[["class","dot-theme-item ui-g-3"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.selectTheme(t.context.$implicit)&&i),i},null,null)),i["\u0275did"](1,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{active:0}),(t()(),i["\u0275and"](16777216,null,null,1,null,N)),i["\u0275did"](4,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](6,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](7,0,null,null,1,"h5",[["class","dot-theme-item__name"]],null,null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""]))],function(t,e){var n=e.component,i=t(e,2,0,e.context.$implicit.inode===(null==n.current?null:n.current.inode));t(e,1,0,"dot-theme-item ui-g-3",i),t(e,4,0,!(null!=e.context.$implicit&&e.context.$implicit.themeThumbnail)),t(e,6,0,null==e.context.$implicit?null:e.context.$implicit.themeThumbnail)},function(t,e){t(e,8,0,e.context.$implicit.name)})}function L(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{searchInput:0}),i["\u0275qud"](402653184,2,{datagrid:0}),(t()(),i["\u0275eld"](2,0,null,null,18,"dot-dialog",[],[[2,"active",null]],[[null,"visibleChange"],[null,"hide"]],function(t,e,n){var i=!0,l=t.component;return"visibleChange"===e&&(i=!1!==(l.visible=n)&&i),"hide"===e&&(i=!1!==l.hideDialog()&&i),i},o.b,o.a)),i["\u0275did"](3,573440,null,0,s.a,[i.ElementRef],{visible:[0,"visible"],header:[1,"header"],actions:[2,"actions"],cssClass:[3,"cssClass"]},{hide:"hide",visibleChange:"visibleChange"}),(t()(),i["\u0275eld"](4,0,null,0,2,"dot-site-selector",[],null,[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.siteChange(n)&&i),i},r.b,r.a)),i["\u0275prd"](512,null,a.b,a.b,[u.d]),i["\u0275did"](6,770048,[["siteSelector",4]],0,d.a,[u.q,a.b,c.a],{archive:[0,"archive"]},{change:"change"}),(t()(),i["\u0275eld"](7,0,null,0,4,"div",[["class","dot-theme-search-box"]],null,null,null,null,null)),(t()(),i["\u0275eld"](8,0,null,null,1,"dot-icon",[["class","searchable-dropdown__search-icon"],["name","search"]],null,null,null,h.b,h.a)),i["\u0275did"](9,49152,null,0,g.a,[],{name:[0,"name"]},null),(t()(),i["\u0275eld"](10,0,[[1,0],["searchInput",1]],null,1,"input",[["class","searchable-dropdown__search-field"],["pInputText",""],["type","text"]],[[8,"placeholder",0],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"input"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,11).onInput(n)&&l),l},null,null)),i["\u0275did"](11,278528,null,0,p.InputText,[i.ElementRef,[2,m.NgModel]],null,null),(t()(),i["\u0275eld"](12,0,null,0,8,"div",[["class","dot-theme-container"]],null,null,null,null,null)),(t()(),i["\u0275eld"](13,0,null,null,7,"p-dataGrid",[],null,[[null,"onLazyLoad"]],function(t,e,n){var i=!0;return"onLazyLoad"===e&&(i=!1!==t.component.paginate(n)&&i),i},z,C)),i["\u0275did"](14,5554176,[[2,4],["dataGrid",4]],3,f.DataGrid,[i.ElementRef,i.IterableDiffers],{paginator:[0,"paginator"],rows:[1,"rows"],totalRecords:[2,"totalRecords"],lazy:[3,"lazy"],emptyMessage:[4,"emptyMessage"],alwaysShowPaginator:[5,"alwaysShowPaginator"],value:[6,"value"]},{onLazyLoad:"onLazyLoad"}),i["\u0275qud"](335544320,3,{header:0}),i["\u0275qud"](335544320,4,{footer:0}),i["\u0275qud"](603979776,5,{templates:1}),i["\u0275pid"](131072,l.AsyncPipe,[i.ChangeDetectorRef]),(t()(),i["\u0275and"](0,null,null,1,null,H)),i["\u0275did"](20,16384,[[5,4]],0,_.PrimeTemplate,[i.TemplateRef],{name:[0,"name"]},null)],function(t,e){var n=e.component;t(e,3,0,n.visible,n.dotMessageService.get("editpage.layout.theme.header"),n.dialogActions,n.paginatorService.totalRecords>n.paginatorService.paginationPerPage?"paginator":""),t(e,6,0,!1),t(e,9,0,"search"),t(e,11,0),t(e,14,0,n.paginatorService.totalRecords>n.paginatorService.paginationPerPage,null==n.paginatorService?null:n.paginatorService.paginationPerPage,null==n.paginatorService?null:n.paginatorService.totalRecords,!0,n.dotMessageService.get("editpage.layout.theme.no.records.found"),!1,i["\u0275unv"](e,14,6,i["\u0275nov"](e,18).transform(n.themes))),t(e,20,0,"item")},function(t,e){var n=e.component;t(e,2,0,i["\u0275nov"](e,3).visible),t(e,10,0,i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("editpage.layout.theme.search"),""),!0,!0,!0,!0,i["\u0275nov"](e,11).filled)})}var A=n("AcEf"),F=n("T+K8"),V=n("5wab"),B=n("sdDj"),W=n("iaQo"),U=n("VSng"),j=function(){function t(t){this.dotMessageService=t}return t.prototype.ngOnInit=function(){var t=this;this.dotMessageService.getMessages(["template.action.additional.permissions","template.action.additional.history","template.action.additional.properties"]).subscribe(function(e){t.items=[{label:e["template.action.additional.properties"],routerLink:"template/"+t.inode+"/properties"},{label:e["template.action.additional.permissions"],routerLink:"template/"+t.inode+"/permissions"},{label:e["template.action.additional.history"],routerLink:"template/"+t.inode+"/history"}]})},t}(),$=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function Y(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"p-menu",[["appendTo","body"],["popup","popup"]],null,null,null,V.b,V.a)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](2,180224,[["menu",4]],0,W.Menu,[i.ElementRef,B.DomHandler,i.Renderer2],{model:[0,"model"],popup:[1,"popup"],appendTo:[2,"appendTo"]},null),(t()(),i["\u0275eld"](3,0,null,null,2,"button",[["icon","fa fa-ellipsis-v"],["pButton",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,2).toggle(n)&&l),l},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](5,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{icon:[0,"icon"]},null)],function(t,e){t(e,2,0,e.component.items,"popup","body"),t(e,5,0,"fa fa-ellipsis-v")},null)}var q=n("g4HV"),X=n("zCrg"),Z=n("Nddw"),K=n("Igsh"),Q=n("MHQr"),J=n("6iwX"),tt=n("MFi8"),et=n("wG5c"),nt=n("sP6A"),it=n("HQi4"),lt=function(){function t(){this.change=new i.EventEmitter,this.propagateChange=function(t){}}return t.prototype.onClick=function(){this.value=!this.value,this.propagateChange(this.value),this.change.emit(this.value)},t.prototype.writeValue=function(t){t&&(this.value=t)},t.prototype.setChecked=function(){this.value=!0},t.prototype.setUnchecked=function(){this.value=!1},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(){},t}(),ot=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;cursor:pointer;align-content:center;padding:8px 16px}[_nghost-%COMP%]:hover{background-color:#f1f3f4}.property-item__footer[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.property-item__sidebar-left[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.property-item__header[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.property-item__icon--selected[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{stroke:var(--color-main);fill:rgba(var(--color-main_rgb),.2)}.property-item__icon--selected[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--color-main)}.property-item__label[_ngcontent-%COMP%]{padding-left:8px;align-self:center}"]],data:{}});function st(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,6,":svg:svg",[[":xmlns:xlink","http://www.w3.org/1999/xlink"],["class","property-item__icon"],["height","20"],["version","1.1"],["viewBox","0 0 20 20"],["width","20"],["xmlns","http://www.w3.org/2000/svg"]],[[2,"property-item__icon--selected",null]],null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,5,":svg:g",[["fill","none"],["id","Canvas"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,4,":svg:g",[["id","icon"]],null,null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,1,":svg:g",[["id","Rectangle 2"]],null,null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,0,":svg:rect",[["height","18"],["rx","1"],["stroke","#444444"],["stroke-width","2"],["width","18"],["x","1"],["y","1"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,1,":svg:g",[["id","Rectangle 2.1"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,0,":svg:path",[["d","M 0 0L 2 0L 2 20L 0 20L 0 0Z"],["fill","#444444"],["transform","matrix(1 1.74846e-07 -1.74846e-07 1 12 0)"]],null,null,null,null,null)),(t()(),i["\u0275eld"](7,0,null,null,1,"span",[["class","property-item__label"]],null,null,null,null,null)),(t()(),i["\u0275ted"](8,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.value),t(e,8,0,n.label)})}var rt=function(){function t(t){this.dotMessageService=t,this.messages={},this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){var t=this;this.dotMessageService.getMessages(["editpage.layout.properties.sidebar.left","editpage.layout.properties.sidebar.right"]).subscribe(function(e){t.messages=e})},t.prototype.writeValue=function(t){t&&(this.value=t)},t.prototype.setValue=function(t,e){t&&"left"===e?(this.propertyItemLeft.setChecked(),this.propertyItemRight.setUnchecked()):t&&"right"===e?(this.propertyItemLeft.setUnchecked(),this.propertyItemRight.setChecked()):this.value.containers=[],this.value.location=t?e:"",this.propagateChange(this.value)},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(){},t}(),at=i["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ut(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{propertyItemLeft:0}),i["\u0275qud"](402653184,2,{propertyItemRight:0}),(t()(),i["\u0275eld"](2,0,null,null,5,"dot-layout-properties-item",[["class","property-item__sidebar-left"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"click"]],function(t,e,n){var l=!0,o=t.component;return"click"===e&&(l=!1!==i["\u0275nov"](t,3).onClick(n)&&l),"change"===e&&(l=!1!==o.setValue(n,"left")&&l),l},st,ot)),i["\u0275did"](3,49152,[[1,4],["propertyItemLeft",4]],0,lt,[],{label:[0,"label"]},{change:"change"}),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[lt]),i["\u0275did"](5,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{model:[0,"model"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](7,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](8,0,null,null,5,"dot-layout-properties-item",[["class","property-item__sidebar-right"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"click"]],function(t,e,n){var l=!0,o=t.component;return"click"===e&&(l=!1!==i["\u0275nov"](t,9).onClick(n)&&l),"change"===e&&(l=!1!==o.setValue(n,"right")&&l),l},st,ot)),i["\u0275did"](9,49152,[[2,4],["propertyItemRight",4]],0,lt,[],{label:[0,"label"]},{change:"change"}),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[lt]),i["\u0275did"](11,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{model:[0,"model"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](13,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null)],function(t,e){var n=e.component;t(e,3,0,n.messages["editpage.layout.properties.sidebar.left"]),t(e,5,0,"left"===n.value.location),t(e,9,0,n.messages["editpage.layout.properties.sidebar.right"]),t(e,11,0,"right"===n.value.location)},function(t,e){t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending),t(e,8,0,i["\u0275nov"](e,13).ngClassUntouched,i["\u0275nov"](e,13).ngClassTouched,i["\u0275nov"](e,13).ngClassPristine,i["\u0275nov"](e,13).ngClassDirty,i["\u0275nov"](e,13).ngClassValid,i["\u0275nov"](e,13).ngClassInvalid,i["\u0275nov"](e,13).ngClassPending)})}var dt=n("4aid"),ct=n("1HPb"),ht=function(){function t(t){this.dotMessageService=t,this.messages={}}return t.prototype.ngOnInit=function(){var t=this;this.dotMessageService.getMessages(["editpage.layout.properties.header","editpage.layout.properties.footer"]).subscribe(function(e){t.messages=e})},t}(),gt=i["\u0275crt"]({encapsulation:2,styles:[[".dot-layout-properties__overlayPanel .ui-overlaypanel-content{padding:8px 0}"]],data:{}});function pt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,24,"p-overlayPanel",[["appendTo","body"],["styleClass","dot-layout-properties__overlayPanel"]],null,null,null,nt.b,nt.a)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](2,180224,[["op",4]],0,it.OverlayPanel,[i.ElementRef,B.DomHandler,i.Renderer2,i.ChangeDetectorRef,i.NgZone],{styleClass:[0,"styleClass"],appendTo:[1,"appendTo"]},null),(t()(),i["\u0275eld"](3,0,null,0,21,"div",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,4).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,4).onReset()&&l),l},null,null)),i["\u0275did"](4,540672,null,0,m.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,m.ControlContainer,null,[m.FormGroupDirective]),i["\u0275did"](6,16384,null,0,m.NgControlStatusGroup,[[4,m.ControlContainer]],null,null),(t()(),i["\u0275eld"](7,0,null,null,5,"dot-layout-properties-item",[["class","property-item__header"],["formControlName","header"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,8).onClick(n)&&l),l},st,ot)),i["\u0275did"](8,49152,null,0,lt,[],{label:[0,"label"]},null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[lt]),i["\u0275did"](10,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](12,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](13,0,null,null,5,"dot-layout-properties-item",[["class","property-item__footer"],["formControlName","footer"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,14).onClick(n)&&l),l},st,ot)),i["\u0275did"](14,49152,null,0,lt,[],{label:[0,"label"]},null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[lt]),i["\u0275did"](16,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](18,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](19,0,null,null,5,"dot-layout-property-sidebar",[["formControlName","sidebar"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,ut,at)),i["\u0275did"](20,114688,null,0,rt,[D.a],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[rt]),i["\u0275did"](22,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](24,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](25,0,null,null,1,"dot-icon-button",[["icon","view_quilt"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,2).toggle(n)&&l),l},dt.b,dt.a)),i["\u0275did"](26,49152,null,0,ct.a,[i.ElementRef],{icon:[0,"icon"]},null)],function(t,e){var n=e.component;t(e,2,0,"dot-layout-properties__overlayPanel","body"),t(e,4,0,n.group),t(e,8,0,n.messages["editpage.layout.properties.header"]),t(e,10,0,"header"),t(e,14,0,n.messages["editpage.layout.properties.footer"]),t(e,16,0,"footer"),t(e,20,0),t(e,22,0,"sidebar"),t(e,26,0,"view_quilt")},function(t,e){t(e,3,0,i["\u0275nov"](e,6).ngClassUntouched,i["\u0275nov"](e,6).ngClassTouched,i["\u0275nov"](e,6).ngClassPristine,i["\u0275nov"](e,6).ngClassDirty,i["\u0275nov"](e,6).ngClassValid,i["\u0275nov"](e,6).ngClassInvalid,i["\u0275nov"](e,6).ngClassPending),t(e,7,0,i["\u0275nov"](e,12).ngClassUntouched,i["\u0275nov"](e,12).ngClassTouched,i["\u0275nov"](e,12).ngClassPristine,i["\u0275nov"](e,12).ngClassDirty,i["\u0275nov"](e,12).ngClassValid,i["\u0275nov"](e,12).ngClassInvalid,i["\u0275nov"](e,12).ngClassPending),t(e,13,0,i["\u0275nov"](e,18).ngClassUntouched,i["\u0275nov"](e,18).ngClassTouched,i["\u0275nov"](e,18).ngClassPristine,i["\u0275nov"](e,18).ngClassDirty,i["\u0275nov"](e,18).ngClassValid,i["\u0275nov"](e,18).ngClassInvalid,i["\u0275nov"](e,18).ngClassPending),t(e,19,0,i["\u0275nov"](e,24).ngClassUntouched,i["\u0275nov"](e,24).ngClassTouched,i["\u0275nov"](e,24).ngClassPristine,i["\u0275nov"](e,24).ngClassDirty,i["\u0275nov"](e,24).ngClassValid,i["\u0275nov"](e,24).ngClassInvalid,i["\u0275nov"](e,24).ngClassPending)})}var mt=n("Kbtk"),ft=n("sy7D"),_t=function(){function t(t,e){this.dotMessageService=t,this.dotEventsService=e,this.change=new i.EventEmitter,this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.sidebar.width.small","editpage.layout.sidebar.width.medium","editpage.layout.sidebar.width.large","editpage.layout.sidebar.action.open"]).subscribe(),this.value={containers:[],location:"",width:""}},t.prototype.changeSidebarSize=function(){this.overlay.hide(),this.dotEventsService.notify("layout-sidebar-change"),this.change.emit()},t.prototype.writeValue=function(t){t&&(this.value=t)},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(){},t}(),vt=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{right:8px;top:8px}"]],data:{}});function yt(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{overlay:0}),(t()(),i["\u0275eld"](1,0,null,null,21,"p-overlayPanel",[["appendTo","body"]],null,null,null,nt.b,nt.a)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](3,180224,[[1,4],["overlay",4]],0,it.OverlayPanel,[i.ElementRef,B.DomHandler,i.Renderer2,i.ChangeDetectorRef,i.NgZone],{appendTo:[0,"appendTo"]},null),(t()(),i["\u0275eld"](4,0,null,0,18,"div",[["class","dot-sidebar-properties__radio-buttons-container"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,5,"p-radioButton",[["name","sidebarWidth"],["value","small"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"ngModelChange"===e&&(i=!1!==(l.value.width=n)&&i),"click"===e&&(i=!1!==l.changeSidebarSize()&&i),i},mt.b,mt.a)),i["\u0275did"](6,49152,null,0,ft.RadioButton,[i.ChangeDetectorRef],{value:[0,"value"],name:[1,"name"],label:[2,"label"]},null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[ft.RadioButton]),i["\u0275did"](8,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](10,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](11,0,null,null,5,"p-radioButton",[["name","sidebarWidth"],["value","medium"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"ngModelChange"===e&&(i=!1!==(l.value.width=n)&&i),"click"===e&&(i=!1!==l.changeSidebarSize()&&i),i},mt.b,mt.a)),i["\u0275did"](12,49152,null,0,ft.RadioButton,[i.ChangeDetectorRef],{value:[0,"value"],name:[1,"name"],label:[2,"label"]},null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[ft.RadioButton]),i["\u0275did"](14,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](16,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](17,0,null,null,5,"p-radioButton",[["name","sidebarWidth"],["value","large"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"ngModelChange"===e&&(i=!1!==(l.value.width=n)&&i),"click"===e&&(i=!1!==l.changeSidebarSize()&&i),i},mt.b,mt.a)),i["\u0275did"](18,49152,null,0,ft.RadioButton,[i.ChangeDetectorRef],{value:[0,"value"],name:[1,"name"],label:[2,"label"]},null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[ft.RadioButton]),i["\u0275did"](20,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](22,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](23,0,null,null,2,"button",[["aria-label","dotMessageService.get('editpage.layout.sidebar.action.open')"],["icon","fa fa-ellipsis-v"],["pButton",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var l=!0;return"click"===e&&(l=!1!==i["\u0275nov"](t,3).toggle(n)&&l),l},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](25,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{icon:[0,"icon"]},null)],function(t,e){var n=e.component;t(e,3,0,"body"),t(e,6,0,"small","sidebarWidth",n.dotMessageService.get("editpage.layout.sidebar.width.small")),t(e,8,0,"sidebarWidth",n.value.width),t(e,12,0,"medium","sidebarWidth",n.dotMessageService.get("editpage.layout.sidebar.width.medium")),t(e,14,0,"sidebarWidth",n.value.width),t(e,18,0,"large","sidebarWidth",n.dotMessageService.get("editpage.layout.sidebar.width.large")),t(e,20,0,"sidebarWidth",n.value.width),t(e,25,0,"fa fa-ellipsis-v")},function(t,e){t(e,5,0,i["\u0275nov"](e,10).ngClassUntouched,i["\u0275nov"](e,10).ngClassTouched,i["\u0275nov"](e,10).ngClassPristine,i["\u0275nov"](e,10).ngClassDirty,i["\u0275nov"](e,10).ngClassValid,i["\u0275nov"](e,10).ngClassInvalid,i["\u0275nov"](e,10).ngClassPending),t(e,11,0,i["\u0275nov"](e,16).ngClassUntouched,i["\u0275nov"](e,16).ngClassTouched,i["\u0275nov"](e,16).ngClassPristine,i["\u0275nov"](e,16).ngClassDirty,i["\u0275nov"](e,16).ngClassValid,i["\u0275nov"](e,16).ngClassInvalid,i["\u0275nov"](e,16).ngClassPending),t(e,17,0,i["\u0275nov"](e,22).ngClassUntouched,i["\u0275nov"](e,22).ngClassTouched,i["\u0275nov"](e,22).ngClassPristine,i["\u0275nov"](e,22).ngClassDirty,i["\u0275nov"](e,22).ngClassValid,i["\u0275nov"](e,22).ngClassInvalid,i["\u0275nov"](e,22).ngClassPending)})}var Ct=n("aCMs"),bt=n("zr5M"),xt=n("0rnf"),wt=function(){function t(t,e,n){this.paginationService=t,this.dotMessageService=e,this.templateContainersCacheService=n,this.data=[],this.change=new i.EventEmitter,this.currentContainers=[]}return t.prototype.ngOnInit=function(){this.paginationService.url="v1/containers",this.dotMessageService.getMessages(["editpage.container.add.label"]).subscribe()},t.prototype.containerChange=function(t){!this.multiple&&this.isContainerSelected(t)||(this.data.push({container:t}),this.change.emit(this.data))},t.prototype.handleFilterChange=function(t){this.getContainersList(t)},t.prototype.handlePageChange=function(t){this.getContainersList(t.filter,t.first)},t.prototype.removeContainerItem=function(t){this.data.splice(t,1),this.change.emit(this.data)},t.prototype.isContainerSelected=function(t){return this.data.some(function(e){return e.container.identifier===t.identifier})},t.prototype.getContainersList=function(t,e){var n=this;void 0===t&&(t=""),void 0===e&&(e=0),this.paginationService.filter=t,this.paginationService.getWithOffset(e).subscribe(function(t){n.currentContainers=n.setIdentifierReference(t.splice(0)),n.totalRecords=n.totalRecords||n.paginationService.totalRecords})},t.prototype.setIdentifierReference=function(t){var e=this;return t.map(function(t){return t.identifier=e.templateContainersCacheService.getContainerReference(t),t})},t}(),St=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.container-selector__list[_ngcontent-%COMP%]{margin:0;overflow-x:hidden;padding:0}.container-selector__list-item[_ngcontent-%COMP%]{margin:0;padding:4px 0;list-style:none;border-top:1px solid #f1f3f4;color:#0a0725;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.container-selector__list-item[_ngcontent-%COMP%]:first-child{border-top:none}"]],data:{}});function Et(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"li",[["class","container-selector__list-item"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,2,"button",[["icon","fa fa-trash"],["pButton",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.removeContainerItem(t.context.index)&&i),i},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](3,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{icon:[0,"icon"]},null),(t()(),i["\u0275ted"](4,null,[" "," "]))],function(t,e){t(e,3,0,"fa fa-trash")},function(t,e){t(e,4,0,null==e.context.$implicit.container?null:e.context.$implicit.container.name)})}function Rt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"dot-searchable-dropdown",[["persistentPlaceholder","true"]],null,[[null,"change"],[null,"filterChange"],[null,"pageChange"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.containerChange(n)&&i),"filterChange"===e&&(i=!1!==l.handleFilterChange(n)&&i),"pageChange"===e&&(i=!1!==l.handlePageChange(n)&&i),i},Ct.b,Ct.a)),i["\u0275prd"](5120,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[bt.a]),i["\u0275did"](2,1687552,null,1,bt.a,[D.a],{data:[0,"data"],labelPropertyName:[1,"labelPropertyName"],pageLinkSize:[2,"pageLinkSize"],rows:[3,"rows"],totalRecords:[4,"totalRecords"],placeholder:[5,"placeholder"],persistentPlaceholder:[6,"persistentPlaceholder"],multiple:[7,"multiple"]},{change:"change",filterChange:"filterChange",pageChange:"pageChange"}),i["\u0275qud"](603979776,1,{templates:1}),i["\u0275pad"](4,2),(t()(),i["\u0275eld"](5,0,null,null,2,"ul",[["class","container-selector__list"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Et)),i["\u0275did"](7,278528,null,0,l.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component,l=n.currentContainers,o=t(e,4,0,"name","parentPermissionable.hostname");t(e,2,0,l,o,5,n.paginationService.paginationPerPage,n.paginationService.totalRecords,i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("editpage.container.add.label"),""),"true",n.multiple),t(e,7,0,n.data)},null)}var zt=n("IMHx"),Mt=function(){function t(t,e){this.dotEditLayoutService=t,this.dotMessageService=e,this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.designer.sidebar"]).subscribe()},t.prototype.getModel=function(t){return t&&(this.value.containers=t.map(function(t){return{identifier:t.container.identifier,uuid:t.uuid}})),this.value},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(){},t.prototype.updateAndPropagate=function(t){this.propagateChange(t?this.getModel(t):this.value)},t.prototype.writeValue=function(t){t&&(this.value=t||null,this.setContainersValue())},t.prototype.setContainersValue=function(){this.containers=this.dotEditLayoutService.getDotLayoutSidebar(this.value.containers)},t}(),Pt=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{background-color:#fff;position:relative;width:100%}[_nghost-%COMP%]     dot-container-selector{height:auto;margin-left:16px;margin-right:16px}[_nghost-%COMP%]     dot-container-selector dot-searchable-dropdown button{margin:8px 0}[_nghost-%COMP%]     dot-container-selector .container-selector__list{height:100%}[_nghost-%COMP%]     .dot-layout-designer__sidebar-properties{position:absolute}h6[_ngcontent-%COMP%]{align-items:center;background-color:#f1f3f4;display:flex;font-size:16px;font-weight:400;height:48px;margin:0;padding-left:16px}"]],data:{}});function It(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,["",""])),(t()(),i["\u0275eld"](2,0,null,null,5,"dot-sidebar-properties",[["class","dot-layout-designer__sidebar-properties"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.updateAndPropagate()&&i),"ngModelChange"===e&&(i=!1!==(l.value=n)&&i),i},yt,vt)),i["\u0275did"](3,114688,null,0,_t,[D.a,c.a],null,{change:"change"}),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[_t]),i["\u0275did"](5,671744,null,0,m.NgModel,[[8,null],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR]],{model:[0,"model"]},{update:"ngModelChange"}),i["\u0275prd"](2048,null,m.NgControl,null,[m.NgModel]),i["\u0275did"](7,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275eld"](8,0,null,null,1,"dot-container-selector",[],null,[[null,"change"]],function(t,e,n){var i=!0;return"change"===e&&(i=!1!==t.component.updateAndPropagate(n)&&i),i},Rt,St)),i["\u0275did"](9,114688,null,0,wt,[a.b,D.a,xt.a],{data:[0,"data"]},{change:"change"})],function(t,e){var n=e.component;t(e,3,0),t(e,5,0,n.value),t(e,9,0,n.containers)},function(t,e){t(e,1,0,e.component.dotMessageService.get("editpage.layout.designer.sidebar")),t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending)})}var Dt=n("oaRE"),Ot=n("m4QD"),Gt=n("nQGg"),Tt=n("04oC"),Nt=n("SlJo"),kt=n("8MWF"),Ht=n("yrs8"),Lt=n("K9Ia"),At=n("ny24"),Ft=function(){return(Ft=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var l in e=arguments[n])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t}).apply(this,arguments)},Vt=function(){function t(t,e,n,i,l){this.dotDialogService=t,this.dotEditLayoutService=e,this.dotMessageService=n,this.dotEventsService=i,this.fb=l,this.addClassDialogShow=!1,this.messages={},this.gridConfig={margins:[0,8,8,0],draggable:!0,resizable:!0,max_cols:kt.a,max_rows:0,visible_cols:kt.a,min_cols:1,min_rows:1,col_width:90,row_height:206,cascade:"up",min_width:40,min_height:206,fix_to_grid:!0,auto_style:!0,auto_resize:!0,maintain_ratio:!1,prefer_new:!1,zoom_on_drag:!1,limit_to_screen:!0},this.rowClass=[],this.destroy$=new Lt.a,this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){var t=this;this.dotMessageService.getMessages(["dot.common.dialog.accept","dot.common.dialog.reject","editpage.action.cancel","editpage.action.delete","editpage.action.save","editpage.confirm.header","editpage.confirm.message.delete","editpage.confirm.message.delete.warning","editpage.layout.css.class.add.to.box","editpage.layout.css.class.add.to.row","editpage.layout.css.class.names"]).pipe(Object(P.a)(1)).subscribe(function(e){t.messages=e}),this.dotEventsService.listen("dot-side-nav-toggle").pipe(Object(At.a)(this.destroy$)).subscribe(function(){t.resizeGrid(200)}),this.dotEventsService.listen("layout-sidebar-change").pipe(Object(At.a)(this.destroy$)).subscribe(function(){t.resizeGrid()}),this.resizeGrid(),this.form=this.fb.group({classToAdd:""}),this.form.valueChanges.pipe(Object(At.a)(this.destroy$)).subscribe(function(){t.addClassDialogActions={cancel:Ft({},t.addClassDialogActions.cancel),accept:Ft({},t.addClassDialogActions.accept,{disabled:!t.form.valid})}}),this.dotEditLayoutService.getBoxes().pipe(Object(At.a)(this.destroy$)).subscribe(function(){t.addBox()})},t.prototype.ngOnDestroy=function(){this.destroy$.next(!0),this.destroy$.complete()},t.prototype.addBox=function(){this.grid.addBox(),this.propagateGridLayoutChange()},t.prototype.getModel=function(){return this.dotEditLayoutService.getDotLayoutBody(this.grid)},t.prototype.updateModel=function(){this.deleteEmptyRows(),this.propagateGridLayoutChange()},t.prototype.onRemoveContainer=function(t){var e=this;this.grid.boxes[t].containers.length?this.dotDialogService.confirm({accept:function(){e.removeContainer(t)},header:this.dotMessageService.get("editpage.confirm.header"),message:this.dotMessageService.get("editpage.confirm.message.delete")+" <span>"+this.dotMessageService.get("editpage.confirm.message.delete.warning")+"</span>",footerLabel:{accept:this.dotMessageService.get("editpage.action.delete"),reject:this.dotMessageService.get("editpage.action.cancel")}}):this.removeContainer(t)},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(){},t.prototype.propagateGridLayoutChange=function(){this.propagateChange(this.getModel()),this.rowClass=this.grid.getAllRowClass()},t.prototype.writeValue=function(t){t&&(this.value=t||null,this.setGridValue())},t.prototype.addColumnClass=function(t,e){var n=this;this.addClass({getter:function(){return n.grid.boxes[t].config.payload&&n.grid.boxes[t].config.payload.styleClass||null},setter:function(e){n.grid.boxes[t].config.payload?n.grid.boxes[t].config.payload.styleClass=e:n.grid.boxes[t].config.payload={styleClass:e}},title:e})},t.prototype.addRowClass=function(t,e){var n=this;this.addClass({getter:function(){return n.grid.getRowClass(t)||""},setter:function(e){return n.grid.setRowClass(e,t)},title:e})},t.prototype.onAddClassDialogHide=function(){this.addClassDialogActions=null,this.addClassDialogShow=!1,this.addClassDialogHeader=""},t.prototype.addClass=function(t){var e=this;this.form.setValue({classToAdd:t.getter.bind(this)()},{emitEvent:!1}),this.addClassDialogActions={accept:{action:function(n){t.setter.bind(e)(e.form.get("classToAdd").value),e.propagateGridLayoutChange(),n.close()},label:"Ok",disabled:!0},cancel:{label:"Cancel"}},this.addClassDialogShow=!0,this.addClassDialogHeader=t.title},t.prototype.setGridValue=function(){this.grid=this.isHaveRows()?this.dotEditLayoutService.getDotLayoutGridBox(this.value):kt.b.getDefaultGrid(),this.rowClass=this.grid.getAllRowClass()},t.prototype.removeContainer=function(t){this.grid.boxes[t]&&(this.grid.removeContainer(t),this.propagateGridLayoutChange())},t.prototype.deleteEmptyRows=function(){var t=this;setTimeout(function(){t.grid.deleteEmptyRows()},0)},t.prototype.isHaveRows=function(){return!!(this.value&&this.value.rows&&this.value.rows.length)},t.prototype.resizeGrid=function(t){var e=this;setTimeout(function(){e.ngGrid.triggerResize()},t||0)},t}(),Bt=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]     dot-container-selector{height:auto;margin-left:16px;margin-right:16px}[_nghost-%COMP%]     dot-container-selector dot-searchable-dropdown button{margin:8px 0}[_nghost-%COMP%]     dot-container-selector dot-searchable-dropdown button, [_nghost-%COMP%]     dot-container-selector dot-searchable-dropdown button:hover{box-shadow:none}[_nghost-%COMP%]     dot-container-selector .container-selector__list{height:140px;margin-top:8px}.grid[_ngcontent-%COMP%]{position:relative}.box[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f1f3f4 0,#f1f3f4 48px,#fff 48px,#fff 100%);border:1px solid #b3b1b8;display:flex;height:206px;justify-content:space-between}.box__actions[_ngcontent-%COMP%]{margin:8px;height:48px}.box__add-row-class-button[_ngcontent-%COMP%]{align-items:center;border:0;cursor:pointer;display:flex;height:206px;padding:0;position:absolute;right:-23px;width:32px;z-index:1}"]],data:{}});function Wt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","box__add-row-class-button"]],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,l.NgStyle,[i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngStyle:[0,"ngStyle"]},null),i["\u0275pod"](2,{"top.px":0}),(t()(),i["\u0275eld"](3,0,null,null,1,"dot-icon-button-tooltip",[["icon","more_horiz"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==l.addRowClass(t.context.index,l.messages["editpage.layout.css.class.add.to.row"])&&i),i},Dt.b,Dt.a)),i["\u0275did"](4,49152,null,0,Ot.a,[],{icon:[0,"icon"],tooltipText:[1,"tooltipText"]},null)],function(t,e){var n=e.component,i=t(e,2,0,e.context.index?214*e.context.index:0);t(e,1,0,i),t(e,4,0,"more_horiz",n.messages["editpage.layout.css.class.add.to.row"])},null)}function Ut(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,16777216,null,null,8,"div",[["class","box"]],null,[[null,"ngGridItemChange"]],function(t,e,n){var i=!0;return"ngGridItemChange"===e&&(i=!1!==(t.context.$implicit.config=n)&&i),i},null,null)),i["\u0275did"](1,475136,null,0,Gt.b,[i.KeyValueDiffers,i.ElementRef,i.Renderer,Gt.a,i.ViewContainerRef],{config:[0,"config"]},{ngGridItemChange:"ngGridItemChange"}),(t()(),i["\u0275eld"](2,0,null,null,1,"dot-container-selector",[],null,[[null,"change"],[null,"remove"]],function(t,e,n){var i=!0,l=t.component;return"change"===e&&(i=!1!==l.propagateGridLayoutChange(n)&&i),"remove"===e&&(i=!1!==l.onRemoveContainer(t.context.index)&&i),i},Rt,St)),i["\u0275did"](3,114688,null,0,wt,[a.b,D.a,xt.a],{data:[0,"data"],multiple:[1,"multiple"]},{change:"change"}),(t()(),i["\u0275eld"](4,0,null,null,4,"div",[["class","box__actions"]],null,null,null,null,null)),(t()(),i["\u0275eld"](5,0,null,null,1,"dot-icon-button-tooltip",[["class","box__add-box-class-button"],["icon","more_horiz"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=!1!==l.addColumnClass(t.context.index,l.messages["editpage.layout.css.class.add.to.box"])&&i),i},Dt.b,Dt.a)),i["\u0275did"](6,49152,null,0,Ot.a,[],{icon:[0,"icon"],tooltipText:[1,"tooltipText"]},null),(t()(),i["\u0275eld"](7,0,null,null,1,"dot-icon-button-tooltip",[["icon","close"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onRemoveContainer(t.context.index)&&i),i},Dt.b,Dt.a)),i["\u0275did"](8,49152,null,0,Ot.a,[],{icon:[0,"icon"],tooltipText:[1,"tooltipText"]},null),(t()(),i["\u0275and"](0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,e.context.$implicit.config),t(e,3,0,e.context.$implicit.containers,!0),t(e,6,0,"more_horiz",n.messages["editpage.layout.css.class.add.to.box"]),t(e,8,0,"close",n.messages["editpage.action.delete"])},null)}function jt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,15,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,2).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,2).onReset()&&l),l},null,null)),i["\u0275did"](1,16384,null,0,m["\u0275angular_packages_forms_forms_bh"],[],null,null),i["\u0275did"](2,540672,null,0,m.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,m.ControlContainer,null,[m.FormGroupDirective]),i["\u0275did"](4,16384,null,0,m.NgControlStatusGroup,[[4,m.ControlContainer]],null,null),(t()(),i["\u0275eld"](5,0,null,null,10,"div",[["class","form__group"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,9,"span",[["dotMdInputtext",""]],null,null,null,null,null)),i["\u0275did"](7,540672,null,0,Tt.a,[i.ElementRef,i.Renderer2],{label:[0,"label"]},null),(t()(),i["\u0275eld"](8,0,null,null,7,"input",[["class","box__add-class-text"],["dotAutofocus",""],["formControlName","classToAdd"],["pInputText",""],["type","text"]],[[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,9).onInput(n)&&l),"input"===e&&(l=!1!==i["\u0275nov"](t,10)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,10).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,10)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,10)._compositionEnd(n.target.value)&&l),l},null,null)),i["\u0275did"](9,278528,null,0,p.InputText,[i.ElementRef,[2,m.NgModel]],null,null),i["\u0275did"](10,16384,null,0,m.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,m.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[m.DefaultValueAccessor]),i["\u0275did"](12,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](14,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),i["\u0275did"](15,81920,null,0,Nt.a,[i.ElementRef],null,null)],function(t,e){var n=e.component;t(e,2,0,n.form),t(e,7,0,n.messages["editpage.layout.css.class.names"]),t(e,9,0),t(e,12,0,"classToAdd"),t(e,15,0)},function(t,e){t(e,0,0,i["\u0275nov"](e,4).ngClassUntouched,i["\u0275nov"](e,4).ngClassTouched,i["\u0275nov"](e,4).ngClassPristine,i["\u0275nov"](e,4).ngClassDirty,i["\u0275nov"](e,4).ngClassValid,i["\u0275nov"](e,4).ngClassInvalid,i["\u0275nov"](e,4).ngClassPending),t(e,8,1,[!0,!0,!0,!0,i["\u0275nov"](e,9).filled,i["\u0275nov"](e,14).ngClassUntouched,i["\u0275nov"](e,14).ngClassTouched,i["\u0275nov"](e,14).ngClassPristine,i["\u0275nov"](e,14).ngClassDirty,i["\u0275nov"](e,14).ngClassValid,i["\u0275nov"](e,14).ngClassInvalid,i["\u0275nov"](e,14).ngClassPending])})}function $t(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{ngGrid:0}),(t()(),i["\u0275eld"](1,0,null,null,5,"div",[["class","grid"]],null,[[null,"onDragStop"],[null,"onResizeStop"],["window","resize"]],function(t,e,n){var l=!0,o=t.component;return"window:resize"===e&&(l=!1!==i["\u0275nov"](t,2).resizeEventHandler(n)&&l),"onDragStop"===e&&(l=!1!==o.updateModel()&&l),"onResizeStop"===e&&(l=!1!==o.updateModel()&&l),l},null,null)),i["\u0275did"](2,475136,[[1,4]],0,Gt.a,[i.KeyValueDiffers,i.ElementRef,i.Renderer,i.ComponentFactoryResolver],{config:[0,"config"]},{onDragStop:"onDragStop",onResizeStop:"onResizeStop"}),(t()(),i["\u0275and"](16777216,null,null,1,null,Wt)),i["\u0275did"](4,278528,null,0,l.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Ut)),i["\u0275did"](6,278528,null,0,l.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275eld"](7,0,null,null,3,"dot-dialog",[],[[2,"active",null]],[[null,"hide"],[null,"visibleChange"]],function(t,e,n){var i=!0,l=t.component;return"hide"===e&&(i=!1!==l.onAddClassDialogHide()&&i),"visibleChange"===e&&(i=!1!==(l.addClassDialogShow=n)&&i),i},o.b,o.a)),i["\u0275did"](8,573440,[["dialog",4]],0,s.a,[i.ElementRef],{visible:[0,"visible"],header:[1,"header"],actions:[2,"actions"],width:[3,"width"]},{hide:"hide",visibleChange:"visibleChange"}),(t()(),i["\u0275and"](16777216,null,0,1,null,jt)),i["\u0275did"](10,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.gridConfig),t(e,4,0,n.rowClass),t(e,6,0,n.grid.boxes),t(e,8,0,n.addClassDialogShow,n.addClassDialogHeader,n.addClassDialogActions,400),t(e,10,0,n.addClassDialogShow)},function(t,e){t(e,7,0,i["\u0275nov"](e,8).visible)})}var Yt=function(){function t(t){this.dotMessageService=t}return t.prototype.ngOnInit=function(){this.messages$=this.dotMessageService.getMessages(["editpage.layout.designer.header","editpage.layout.designer.footer"]).pipe(Object(P.a)(1))},t}(),qt=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex}.dot-layout-designer[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.dot-layout-designer__main[_ngcontent-%COMP%]{display:flex;flex-grow:1}.dot-layout-designer__footer[_ngcontent-%COMP%], .dot-layout-designer__header[_ngcontent-%COMP%], [class^=dot-layout-designer__sidebar][_ngcontent-%COMP%]{align-items:center;background:#f1f3f4;color:#7e7a86;display:flex;flex-shrink:0;font-size:24px;justify-content:center}[class^=dot-layout-designer__sidebar][_ngcontent-%COMP%]{align-items:normal}[class^=dot-layout-designer__sidebar][_ngcontent-%COMP%]   dot-container-selector[_ngcontent-%COMP%]{width:100%}.dot-layout-designer__sidebar--left[_ngcontent-%COMP%], .dot-layout-designer__sidebar--right[_ngcontent-%COMP%]{border:1px solid #b3b1b8}.dot-layout-designer__sidebar--small[_ngcontent-%COMP%]{width:200px}.dot-layout-designer__sidebar--medium[_ngcontent-%COMP%]{width:250px}.dot-layout-designer__sidebar--large[_ngcontent-%COMP%]{width:300px}.dot-layout-designer__sidebar--left[_ngcontent-%COMP%]{margin-right:16px}.dot-layout-designer__sidebar--right[_ngcontent-%COMP%]{margin-left:32px}.dot-layout-designer__footer[_ngcontent-%COMP%], .dot-layout-designer__header[_ngcontent-%COMP%]{height:80px}.dot-layout-designer__header[_ngcontent-%COMP%], .dot-layout-designer__main[_ngcontent-%COMP%]{margin-bottom:16px}.dot-layout-designer__body[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column}.dot-layout-designer__body[_ngcontent-%COMP%]  .action-button--no-label .ui-button.ui-button-icon-only{height:36px;width:36px;font-size:12px}.dot-layout-designer__toolbar-add[_ngcontent-%COMP%]{align-self:flex-end;margin-bottom:8px}.dot-layout-designer__grid-guides[_ngcontent-%COMP%]{background:repeating-linear-gradient(-90deg,transparent,transparent 8px,#f1f3f4 8px,#f1f3f4 calc(100% / 12));flex-grow:1;margin-right:-8px}"]],data:{}});function Xt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","dot-layout-designer__header"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.parent.context.ngIf["editpage.layout.designer.header"])})}function Zt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,7,"div",[["class","dot-layout-designer__sidebar--left"]],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),i["\u0275eld"](2,0,null,null,5,"dot-edit-layout-sidebar",[["formControlName","sidebar"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,It,Pt)),i["\u0275did"](3,114688,null,0,Mt,[zt.a,D.a],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[Mt]),i["\u0275did"](5,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](7,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null)],function(t,e){t(e,1,0,"dot-layout-designer__sidebar--left","dot-layout-designer__sidebar--"+e.component.group.get("sidebar").value.width),t(e,3,0),t(e,5,0,"sidebar")},function(t,e){t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending)})}function Kt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,7,"div",[["class","dot-layout-designer__sidebar--right"]],null,null,null,null,null)),i["\u0275did"](1,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),i["\u0275eld"](2,0,null,null,5,"dot-edit-layout-sidebar",[["formControlName","sidebar"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,It,Pt)),i["\u0275did"](3,114688,null,0,Mt,[zt.a,D.a],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[Mt]),i["\u0275did"](5,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](7,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null)],function(t,e){t(e,1,0,"dot-layout-designer__sidebar--right","dot-layout-designer__sidebar--"+e.component.group.get("sidebar").value.width),t(e,3,0),t(e,5,0,"sidebar")},function(t,e){t(e,2,0,i["\u0275nov"](e,7).ngClassUntouched,i["\u0275nov"](e,7).ngClassTouched,i["\u0275nov"](e,7).ngClassPristine,i["\u0275nov"](e,7).ngClassDirty,i["\u0275nov"](e,7).ngClassValid,i["\u0275nov"](e,7).ngClassInvalid,i["\u0275nov"](e,7).ngClassPending)})}function Qt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"div",[["class","dot-layout-designer__footer"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.parent.context.ngIf["editpage.layout.designer.footer"])})}function Jt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,20,"div",[["class","dot-layout-designer"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0;return"submit"===e&&(l=!1!==i["\u0275nov"](t,1).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,1).onReset()&&l),l},null,null)),i["\u0275did"](1,540672,null,0,m.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,m.ControlContainer,null,[m.FormGroupDirective]),i["\u0275did"](3,16384,null,0,m.NgControlStatusGroup,[[4,m.ControlContainer]],null,null),(t()(),i["\u0275and"](16777216,null,null,1,null,Xt)),i["\u0275did"](5,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](6,0,null,null,12,"div",[["class","dot-layout-designer__main"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Zt)),i["\u0275did"](8,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](9,0,null,null,7,"div",[["class","dot-layout-designer__body"]],null,null,null,null,null)),(t()(),i["\u0275eld"](10,0,null,null,6,"div",[["class","dot-layout-designer__grid-guides"]],null,null,null,null,null)),(t()(),i["\u0275eld"](11,0,null,null,5,"dot-edit-layout-grid",[["formControlName","body"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,$t,Bt)),i["\u0275did"](12,245760,null,0,Vt,[Ht.a,zt.a,D.a,c.a,m.FormBuilder],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[Vt]),i["\u0275did"](14,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](16,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),(t()(),i["\u0275and"](16777216,null,null,1,null,Kt)),i["\u0275did"](18,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Qt)),i["\u0275did"](20,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.group),t(e,5,0,n.group.get("header").value),t(e,8,0,"left"===n.group.get("sidebar").value.location),t(e,12,0),t(e,14,0,"body"),t(e,18,0,"right"===n.group.get("sidebar").value.location),t(e,20,0,n.group.get("footer").value)},function(t,e){t(e,0,0,i["\u0275nov"](e,3).ngClassUntouched,i["\u0275nov"](e,3).ngClassTouched,i["\u0275nov"](e,3).ngClassPristine,i["\u0275nov"](e,3).ngClassDirty,i["\u0275nov"](e,3).ngClassValid,i["\u0275nov"](e,3).ngClassInvalid,i["\u0275nov"](e,3).ngClassPending),t(e,11,0,i["\u0275nov"](e,16).ngClassUntouched,i["\u0275nov"](e,16).ngClassTouched,i["\u0275nov"](e,16).ngClassPristine,i["\u0275nov"](e,16).ngClassDirty,i["\u0275nov"](e,16).ngClassValid,i["\u0275nov"](e,16).ngClassInvalid,i["\u0275nov"](e,16).ngClassPending)})}function te(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,2,null,Jt)),i["\u0275did"](1,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pid"](131072,l.AsyncPipe,[i.ChangeDetectorRef])],function(t,e){var n=e.component;t(e,1,0,i["\u0275unv"](e,1,0,i["\u0275nov"](e,2).transform(n.messages$)))},null)}var ee=n("ds6q"),ne=n("58bb"),ie=n("BjIa"),le=n("LvDl"),oe=n("tkgH"),se=n("Gm7J"),re=n("wMrY"),ae=n("N3T1"),ue=n("xMyE"),de=function(){return(de=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var l in e=arguments[n])Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t}).apply(this,arguments)},ce=function(){function t(t,e,n,i,l,o,s,r,a,u,d,c){this.dotDialogService=t,this.dotEditLayoutService=e,this.dotEventsService=n,this.dotGlobalMessageService=i,this.dotHttpErrorManagerService=l,this.dotRouterService=o,this.dotThemesService=s,this.fb=r,this.loginService=a,this.dotPageLayoutService=u,this.templateContainersCacheService=d,this.dotMessageService=c,this.editTemplate=!1,this.isModelUpdated=!1,this.themeDialogVisibility=!1,this.showTemplateLayoutSelectionDialog=!1,this.destroy$=new ee.Subject}return t.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["common.validation.name.error.required","dot.common.cancel","dot.common.message.saved","dot.common.message.saving","editpage.layout.dialog.edit.page","editpage.layout.dialog.edit.page","editpage.layout.dialog.edit.template","editpage.layout.dialog.edit.template","editpage.layout.dialog.header","editpage.layout.dialog.header","editpage.layout.dialog.info","editpage.layout.dialog.info","editpage.layout.theme.button.label","editpage.layout.toolbar.action.save","editpage.layout.toolbar.save.template","editpage.layout.toolbar.template.name","org.dotcms.frontend.content.submission.not.proper.permissions"]).pipe(Object(P.a)(1)).subscribe(),this.setupLayout(),this.shouldShowDialog()?this.showTemplateLayoutDialog():this.setEditLayoutMode()},t.prototype.ngOnDestroy=function(){this.destroy$.next(!0),this.destroy$.complete()},t.prototype.addGridBox=function(){this.dotEditLayoutService.addBox()},t.prototype.isLayout=function(){return!this.pageState.template||this.pageState.template.anonymous},t.prototype.onCancel=function(){this.dotRouterService.goToEditPage(this.pageState.page.pageURI)},t.prototype.saveAsTemplateHandleChange=function(t){var e=this,n=this.form.get("title");n.markAsUntouched(),n.markAsPristine(),this.saveAsTemplate=t,this.saveAsTemplate?(n.setValidators(m.Validators.required),setTimeout(function(){e.templateName.nativeElement.focus()},0)):(n.setValidators(null),null===this.initialFormValue.title&&n.setValue(null)),n.updateValueAndValidity()},t.prototype.saveLayout=function(){var t=this;this.dotGlobalMessageService.loading(this.dotMessageService.get("dot.common.message.saving")),this.dotPageLayoutService.save(this.pageState.page.identifier,this.form.value).pipe(Object(P.a)(1)).subscribe(function(e){t.dotGlobalMessageService.success(t.dotMessageService.get("dot.common.message.saved")),t.setupLayout(new ne.a(t.loginService.auth.user,e))},function(e){t.dotGlobalMessageService.error(e.response.statusText)})},t.prototype.setEditLayoutMode=function(){this.initialFormValue.title=null,this.form.get("title").setValue(null),this.pageState.template&&(this.pageState.template.anonymous=!0)},t.prototype.changeThemeHandler=function(t){this.currentTheme=t,this.form.get("themeId").setValue(t.inode),this.themeDialogVisibility=!1},t.prototype.closeThemeDialog=function(){this.themeDialogVisibility=!1},t.prototype.setupLayout=function(t){var e=this;t&&(this.pageState=t),this.templateContainersCacheService.set(this.pageState.containers),this.initForm(),this.saveAsTemplateHandleChange(!1),this.dotThemesService.get(this.form.get("themeId").value).pipe(Object(P.a)(1)).subscribe(function(t){e.currentTheme=t},function(t){return e.errorHandler(t)}),this.form.get("layout.sidebar").valueChanges.pipe(Object(At.a)(this.destroy$)).subscribe(function(){e.dotEventsService.notify("layout-sidebar-change")})},t.prototype.cleanUpBody=function(t){return t?{rows:t.rows.map(function(t){return de({},t,{columns:t.columns.map(function(t){return{containers:t.containers,leftOffset:t.leftOffset,width:t.width,styleClass:t.styleClass}})})})}:null},t.prototype.initForm=function(){var t=this;this.form=this.fb.group({title:this.isLayout()?null:this.pageState.template.title,themeId:this.pageState.template.theme,layout:this.fb.group({body:this.cleanUpBody(this.pageState.layout.body)||{},header:this.pageState.layout.header,footer:this.pageState.layout.footer,sidebar:this.createSidebarForm()})}),this.initialFormValue=le.cloneDeep(this.form.value),this.isModelUpdated=!1,this.form.valueChanges.pipe(Object(At.a)(this.destroy$)).subscribe(function(){t.isModelUpdated=!le.isEqual(t.form.value,t.initialFormValue)})},t.prototype.showTemplateLayoutDialog=function(){var t=this;this.dotDialogService.alert({header:this.dotMessageService.get("editpage.layout.dialog.header"),message:this.dotMessageService.get("editpage.layout.dialog.info",this.pageState.template.name),footerLabel:{accept:this.dotMessageService.get("editpage.layout.dialog.edit.page"),reject:this.dotMessageService.get("editpage.layout.dialog.edit.template")},accept:function(){t.setEditLayoutMode()}})},t.prototype.createSidebarForm=function(){return{location:this.pageState.layout.sidebar?this.pageState.layout.sidebar.location:"",containers:this.pageState.layout.sidebar?this.pageState.layout.sidebar.containers:[],width:this.pageState.layout.sidebar?this.pageState.layout.sidebar.width:"small"}},t.prototype.shouldShowDialog=function(){return this.editTemplate&&!this.isLayout()&&this.pageState.template.canEdit},t.prototype.errorHandler=function(t){var e=this;return this.dotHttpErrorManagerService.handle(t).pipe(Object(ue.a)(function(n){n.redirected||e.dotRouterService.goToSiteBrowser(),e.currentTheme=403===t.response.status?null:e.currentTheme}))},t}(),he=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{min-width:750px}dot-layout-properties[_ngcontent-%COMP%]{margin-right:8px}dot-layout-designer[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);flex-grow:1;margin:0 16px;padding:32px;height:calc(100vh - 60px - 68px - 48px - 16px);overflow:auto}.dot-edit-layout__actions[_ngcontent-%COMP%]{display:flex;height:52px;justify-content:flex-end;padding:16px}.dot-edit-layout__toolbar[_ngcontent-%COMP%]{background-color:#fff;display:block;position:relative;z-index:1}.dot-edit-layout__toolbar[_ngcontent-%COMP%]     .ui-toolbar{border-bottom:1px solid #b3b1b8;padding:16px}.dot-edit-layout__toolbar-action-cancel[_ngcontent-%COMP%]{margin-right:8px}.dot-edit__layout-actions-right[_ngcontent-%COMP%]{display:flex;align-items:center}.dot-edit__layout-actions-right[_ngcontent-%COMP%]   .dot-edit__layout-actions-themes[_ngcontent-%COMP%]{display:inline}"]],data:{}});function ge(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"dot-theme-selector",[],null,[[null,"selected"],[null,"close"]],function(t,e,n){var i=!0,l=t.component;return"selected"===e&&(i=!1!==l.changeThemeHandler(n)&&i),"close"===e&&(i=!1!==l.closeThemeDialog()&&i),i},L,T)),i["\u0275did"](1,114688,null,0,G,[D.a,a.b,u.q],{value:[0,"value"]},{selected:"selected",close:"close"})],function(t,e){t(e,1,0,e.component.currentTheme)},null)}function pe(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,[[1,0],["templateName",1]],null,6,"input",[["class","dot-edit-layout__toolbar-template-name"],["formControlName","title"],["pInputText",""],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ui-inputtext",null],[2,"ui-corner-all",null],[2,"ui-state-default",null],[2,"ui-widget",null],[2,"ui-state-filled",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var l=!0;return"input"===e&&(l=!1!==i["\u0275nov"](t,1)._handleInput(n.target.value)&&l),"blur"===e&&(l=!1!==i["\u0275nov"](t,1).onTouched()&&l),"compositionstart"===e&&(l=!1!==i["\u0275nov"](t,1)._compositionStart()&&l),"compositionend"===e&&(l=!1!==i["\u0275nov"](t,1)._compositionEnd(n.target.value)&&l),"input"===e&&(l=!1!==i["\u0275nov"](t,6).onInput(n)&&l),l},null,null)),i["\u0275did"](1,16384,null,0,m.DefaultValueAccessor,[i.Renderer2,i.ElementRef,[2,m.COMPOSITION_BUFFER_MODE]],null,null),i["\u0275prd"](1024,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[m.DefaultValueAccessor]),i["\u0275did"](3,671744,null,0,m.FormControlName,[[3,m.ControlContainer],[8,null],[8,null],[6,m.NG_VALUE_ACCESSOR],[2,m["\u0275angular_packages_forms_forms_k"]]],{name:[0,"name"]},null),i["\u0275prd"](2048,null,m.NgControl,null,[m.FormControlName]),i["\u0275did"](5,16384,null,0,m.NgControlStatus,[[4,m.NgControl]],null,null),i["\u0275did"](6,278528,null,0,p.InputText,[i.ElementRef,[2,m.NgModel]],null,null)],function(t,e){t(e,3,0,"title"),t(e,6,0)},function(t,e){t(e,0,1,[i["\u0275inlineInterpolate"](1,"",e.component.dotMessageService.get("editpage.layout.toolbar.template.name")," *"),i["\u0275nov"](e,5).ngClassUntouched,i["\u0275nov"](e,5).ngClassTouched,i["\u0275nov"](e,5).ngClassPristine,i["\u0275nov"](e,5).ngClassDirty,i["\u0275nov"](e,5).ngClassValid,i["\u0275nov"](e,5).ngClassInvalid,i["\u0275nov"](e,5).ngClassPending,!0,!0,!0,!0,i["\u0275nov"](e,6).filled])})}function me(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"p-checkbox",[["binary","true"],["class","dot-edit-layout__toolbar-save-template"]],null,[[null,"onChange"]],function(t,e,n){var i=!0;return"onChange"===e&&(i=!1!==t.component.saveAsTemplateHandleChange(n)&&i),i},A.b,A.a)),i["\u0275prd"](5120,null,m.NG_VALUE_ACCESSOR,function(t){return[t]},[F.Checkbox]),i["\u0275did"](2,49152,null,0,F.Checkbox,[i.ChangeDetectorRef],{binary:[0,"binary"],label:[1,"label"]},{onChange:"onChange"})],function(t,e){t(e,2,0,"true",i["\u0275inlineInterpolate"](1,"",e.component.dotMessageService.get("editpage.layout.toolbar.save.template"),""))},null)}function fe(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"dot-template-addtional-actions-menu",[],null,null,null,Y,$)),i["\u0275did"](1,114688,null,0,j,[D.a],{inode:[0,"inode"]},null)],function(t,e){t(e,1,0,e.component.pageState.template.inode)},null)}function _e(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function ve(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","dot-edit__layout-actions-themes"],["tooltipPosition","left"]],null,null,null,null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](2,4341760,null,0,q.Tooltip,[i.ElementRef,B.DomHandler,i.NgZone],{tooltipPosition:[0,"tooltipPosition"],text:[1,"text"]},null),(t()(),i["\u0275eld"](3,0,null,null,2,"button",[["class","dot-edit-layout__toolbar-action-themes"],["disabled","false"],["icon","fa fa-paint-brush"],["link",""],["pButton",""],["tiny",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=0!=(l.themeDialogVisibility=!l.themeDialogVisibility)&&i),i},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](5,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{label:[0,"label"],icon:[1,"icon"]},null)],function(t,e){var n=e.component;t(e,2,0,"left",i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("org.dotcms.frontend.content.submission.not.proper.permissions"),"")),t(e,5,0,i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("editpage.layout.theme.button.label"),""),"fa fa-paint-brush")},null)}function ye(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"button",[["class","dot-edit-layout__toolbar-action-themes"],["icon","fa fa-paint-brush"],["link",""],["pButton",""],["tiny",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0,l=t.component;return"click"===e&&(i=0!=(l.themeDialogVisibility=!l.themeDialogVisibility)&&i),i},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](2,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{label:[0,"label"],icon:[1,"icon"]},null)],function(t,e){var n=e.component;t(e,2,0,i["\u0275inlineInterpolate"](1,"",(null==n.currentTheme?null:n.currentTheme.name)||"Themes",""),"fa fa-paint-brush")},null)}function Ce(t){return i["\u0275vid"](0,[i["\u0275qud"](671088640,1,{templateName:0}),(t()(),i["\u0275and"](16777216,null,null,1,null,ge)),i["\u0275did"](2,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](3,0,null,null,34,"dot-secondary-toolbar",[],null,null,null,X.b,X.a)),i["\u0275did"](4,49152,null,0,Z.a,[],null,null),(t()(),i["\u0275eld"](5,0,null,0,2,"div",[["class","main-toolbar-left"]],null,null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,1,"dot-edit-page-info",[],null,null,null,K.b,K.a)),i["\u0275did"](7,114688,null,0,Q.a,[u.q,D.a,J.a],{pageState:[0,"pageState"]},null),(t()(),i["\u0275eld"](8,0,null,1,19,"div",[["class","main-toolbar-right"]],null,null,null,null,null)),(t()(),i["\u0275eld"](9,0,null,null,1,"dot-global-message",[],[[8,"className",0]],null,null,tt.b,tt.a)),i["\u0275did"](10,245760,null,0,et.a,[c.a],null,null),(t()(),i["\u0275eld"](11,0,null,null,16,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var l=!0,o=t.component;return"submit"===e&&(l=!1!==i["\u0275nov"](t,13).onSubmit(n)&&l),"reset"===e&&(l=!1!==i["\u0275nov"](t,13).onReset()&&l),"ngSubmit"===e&&(l=!1!==o.saveLayout()&&l),l},null,null)),i["\u0275did"](12,16384,null,0,m["\u0275angular_packages_forms_forms_bh"],[],null,null),i["\u0275did"](13,540672,null,0,m.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),i["\u0275prd"](2048,null,m.ControlContainer,null,[m.FormGroupDirective]),i["\u0275did"](15,16384,null,0,m.NgControlStatusGroup,[[4,m.ControlContainer]],null,null),(t()(),i["\u0275and"](16777216,null,null,1,null,pe)),i["\u0275did"](17,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,me)),i["\u0275did"](19,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](20,0,null,null,2,"button",[["class","dot-edit-layout__toolbar-action-cancel"],["pButton",""],["secondary",""],["tiny",""],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onCancel()&&i),i},null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](22,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{label:[0,"label"]},null),(t()(),i["\u0275eld"](23,0,null,null,2,"button",[["class","dot-edit-layout__toolbar-save"],["pButton",""],["tiny",""],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),i["\u0275prd"](512,null,B.DomHandler,B.DomHandler,[]),i["\u0275did"](25,4341760,null,0,U.ButtonDirective,[i.ElementRef,B.DomHandler],{label:[0,"label"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,fe)),i["\u0275did"](27,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](28,0,null,2,0,"div",[["class","lower-toolbar-left"]],null,null,null,null,null)),(t()(),i["\u0275eld"](29,0,null,3,8,"div",[["class","lower-toolbar-right"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,_e)),i["\u0275did"](31,16384,null,0,l.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"],ngIfThen:[1,"ngIfThen"],ngIfElse:[2,"ngIfElse"]},null),(t()(),i["\u0275and"](0,[["permission",2]],null,0,null,ve)),(t()(),i["\u0275and"](0,[["noPermission",2]],null,0,null,ye)),(t()(),i["\u0275eld"](34,0,null,null,1,"dot-layout-properties",[],null,null,null,pt,gt)),i["\u0275did"](35,114688,null,0,ht,[D.a],{group:[0,"group"]},null),(t()(),i["\u0275eld"](36,0,null,null,1,"dot-icon-button",[["float",""],["icon","add"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.addGridBox()&&i),i},dt.b,dt.a)),i["\u0275did"](37,49152,null,0,ct.a,[i.ElementRef],{icon:[0,"icon"],size:[1,"size"]},null),(t()(),i["\u0275eld"](38,0,null,null,1,"dot-layout-designer",[],null,null,null,te,qt)),i["\u0275did"](39,114688,null,0,Yt,[D.a],{group:[0,"group"]},null)],function(t,e){var n=e.component;t(e,2,0,n.themeDialogVisibility),t(e,7,0,n.pageState),t(e,10,0),t(e,13,0,n.form),t(e,17,0,n.saveAsTemplate),t(e,19,0,n.editTemplate&&n.isLayout()&&n.pageState.canCreateTemplate),t(e,22,0,i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("dot.common.cancel"),"")),t(e,25,0,i["\u0275inlineInterpolate"](1,"",n.dotMessageService.get("editpage.layout.toolbar.action.save"),"")),t(e,27,0,!n.isLayout()),t(e,31,0,!n.currentTheme,i["\u0275nov"](e,32),i["\u0275nov"](e,33)),t(e,35,0,n.form.get("layout")),t(e,37,0,"add",32),t(e,39,0,n.form.get("layout"))},function(t,e){var n=e.component;t(e,9,0,i["\u0275nov"](e,10).classes),t(e,11,0,i["\u0275nov"](e,15).ngClassUntouched,i["\u0275nov"](e,15).ngClassTouched,i["\u0275nov"](e,15).ngClassPristine,i["\u0275nov"](e,15).ngClassDirty,i["\u0275nov"](e,15).ngClassValid,i["\u0275nov"](e,15).ngClassInvalid,i["\u0275nov"](e,15).ngClassPending),t(e,23,0,!n.isModelUpdated||!n.form.valid)})}var be=n("o0I2"),xe=n("ZYCi");n.d(e,"a",function(){return Re});var we=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{flex-grow:1}"]],data:{}});function Se(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"dot-edit-layout-designer",[],null,null,null,Ce,he)),i["\u0275did"](1,245760,null,0,ce,[Ht.a,zt.a,c.a,oe.a,ae.a,se.a,re.a,m.FormBuilder,u.m,ie.a,xt.a,D.a],{pageState:[0,"pageState"]},null),i["\u0275pid"](131072,l.AsyncPipe,[i.ChangeDetectorRef])],function(t,e){var n=e.component;t(e,1,0,i["\u0275unv"](e,1,0,i["\u0275nov"](e,2).transform(n.pageState)))},null)}function Ee(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"dot-edit-layout",[],null,null,null,Se,we)),i["\u0275did"](1,114688,null,0,be.a,[xe.ActivatedRoute],null,null)],function(t,e){t(e,1,0)},null)}var Re=i["\u0275ccf"]("dot-edit-layout",be.a,Ee,{},{},[])},fJ8f:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},kMpc:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},"lu/G":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},m4QD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},nQGg:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return d});var i=n("bne5"),l=n("mrSG"),o=n("CcnG"),s=function(){function t(t,e){this._ngEl=t,this._renderer=e}return t.prototype.registerGrid=function(t){this._ngGrid=t},t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid-placeholder",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","absolute")},t.prototype.setSize=function(t){this._size=t,this._recalculateDimensions()},t.prototype.setGridPosition=function(t){this._position=t,this._recalculatePosition()},t.prototype.setCascadeMode=function(t){switch(this._cascadeMode=t,t){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"left",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",null)}},t.prototype._setDimensions=function(t,e){this._renderer.setElementStyle(this._ngEl.nativeElement,"width",t+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"height",e+"px")},t.prototype._setPosition=function(t,e){switch(this._cascadeMode){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+t+"px, "+e+"px)");break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+-t+"px, "+e+"px)");break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+t+"px, "+-e+"px)")}},t.prototype._recalculatePosition=function(){this._setPosition((this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._position.col-1)+this._ngGrid.marginLeft+this._ngGrid.screenMargin,(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._position.row-1)+this._ngGrid.marginTop)},t.prototype._recalculateDimensions=function(){this._setDimensions(this._ngGrid.colWidth*this._size.x+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._size.x-1),this._ngGrid.rowHeight*this._size.y+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._size.y-1))},t}(),r=function(){function t(){}return t.generateUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},t.sortItemsByPositionHorizontal=function(t,e){return t.col===e.col?t.row-e.row:t.col-e.col},t.sortItemsByPositionVertical=function(t,e){return t.row===e.row?t.col-e.col:t.row-e.row},t}(),a=function(){function t(e,n,i,l){this._differs=e,this._ngEl=n,this._renderer=i,this.componentFactoryResolver=l,this.onDragStart=new o.EventEmitter,this.onDrag=new o.EventEmitter,this.onDragStop=new o.EventEmitter,this.onResizeStart=new o.EventEmitter,this.onResize=new o.EventEmitter,this.onResizeStop=new o.EventEmitter,this.onItemChange=new o.EventEmitter,this.colWidth=250,this.rowHeight=250,this.minCols=1,this.minRows=1,this.marginTop=10,this.marginRight=10,this.marginBottom=10,this.marginLeft=10,this.screenMargin=0,this.isDragging=!1,this.isResizing=!1,this.autoStyle=!0,this.resizeEnable=!0,this.dragEnable=!0,this.cascade="up",this.minWidth=100,this.minHeight=100,this.resizeDirections=t.CONST_DEFAULT_RESIZE_DIRECTIONS,this._items=new Map,this._draggingItem=null,this._resizingItem=null,this._resizeDirection=null,this._itemsInGrid=new Set,this._maxCols=0,this._maxRows=0,this._visibleCols=0,this._visibleRows=0,this._posOffset=null,this._placeholderRef=null,this._fixToGrid=!1,this._autoResize=!1,this._destroyed=!1,this._maintainRatio=!1,this._preferNew=!1,this._zoomOnDrag=!1,this._limitToScreen=!1,this._centerToScreen=!1,this._curMaxRow=0,this._curMaxCol=0,this._dragReady=!1,this._resizeReady=!1,this._elementBasedDynamicRowHeight=!1,this._itemFixDirection="cascade",this._collisionFixDirection="cascade",this._allowOverlap=!1,this._lastZValue=1,this._subscriptions=[],this._enabledListener=!1,this._config=t.CONST_DEFAULT_CONFIG,this._defineListeners()}return Object.defineProperty(t.prototype,"config",{set:function(t){null!=t&&"object"==typeof t&&(this.setConfig(t),null==this._differ&&null!=t&&(this._differ=this._differs.find(this._config).create()),this._differ.diff(this._config))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid",!0),this.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","relative"),this.setConfig(this._config)},t.prototype.ngOnDestroy=function(){this._destroyed=!0,this._disableListeners()},t.prototype.generateItemUid=function(){var t=r.generateUuid();return this._items.has(t)?this.generateItemUid():t},t.prototype.setConfig=function(t){var e=this;this._config=t;var n=!1;for(var i in t)if(i in t){var l=t[i],o=l?parseInt(l,10):0;switch(i){case"margins":this.setMargins(l);break;case"col_width":this.colWidth=Math.max(o,1);break;case"row_height":this.rowHeight=Math.max(o,1);break;case"auto_style":this.autoStyle=!!l;break;case"auto_resize":this._autoResize=!!l;break;case"draggable":this.dragEnable=!!l;break;case"resizable":this.resizeEnable=!!l;break;case"max_rows":n=n||this._maxRows!==o,this._maxRows=o<0?0:o;break;case"max_cols":n=n||this._maxCols!==o,this._maxCols=o<0?0:o;break;case"visible_rows":this._visibleRows=Math.max(o,0);break;case"visible_cols":this._visibleCols=Math.max(o,0);break;case"min_rows":this.minRows=Math.max(o,1);break;case"min_cols":this.minCols=Math.max(o,1);break;case"min_height":this.minHeight=Math.max(o,1);break;case"min_width":this.minWidth=Math.max(o,1);break;case"zoom_on_drag":this._zoomOnDrag=!!l;break;case"cascade":this.cascade!==l&&(this.cascade=l,this._cascadeGrid());break;case"fix_to_grid":this._fixToGrid=!!l;break;case"maintain_ratio":this._maintainRatio=!!l;break;case"prefer_new":this._preferNew=!!l;break;case"limit_to_screen":this._limitToScreen=!this._autoResize&&!!l;break;case"center_to_screen":this._centerToScreen=!!l;break;case"resize_directions":this.resizeDirections=l||["bottomright","bottomleft","topright","topleft","right","left","bottom","top"];break;case"element_based_row_height":this._elementBasedDynamicRowHeight=!!l;break;case"fix_item_position_direction":this._itemFixDirection=l;break;case"fix_collision_position_direction":this._collisionFixDirection=l;break;case"allow_overlap":this._allowOverlap=!!l}}if(this._allowOverlap&&"off"!==this.cascade&&""!==this.cascade&&(console.warn("Unable to overlap items when a cascade direction is set."),this._allowOverlap=!1),this.dragEnable||this.resizeEnable?this._enableListeners():this._disableListeners(),"cascade"===this._itemFixDirection&&(this._itemFixDirection=this._getFixDirectionFromCascade()),"cascade"===this._collisionFixDirection&&(this._collisionFixDirection=this._getFixDirectionFromCascade()),this._limitToScreen){var s=this._getContainerColumns();this._maxCols!==s&&(this._maxCols=s,n=!0)}if(this.screenMargin=this._limitToScreen&&this._centerToScreen?this._getScreenMargin():0,this._maintainRatio&&(this.colWidth&&this.rowHeight?this._aspectRatio=this.colWidth/this.rowHeight:this._maintainRatio=!1),n){if(this._maxCols>0&&this._maxRows>0)switch(this.cascade){case"left":case"right":this._maxCols=0;break;case"up":case"down":default:this._maxRows=0}this._updatePositionsAfterMaxChange()}this._calculateColWidth(),this._calculateRowHeight();var r=this._maxCols*this.colWidth,a=this._maxRows*this.rowHeight;r>0&&this.minWidth>r&&(this.minWidth=.75*this.colWidth),a>0&&this.minHeight>a&&(this.minHeight=.75*this.rowHeight),this.minWidth>this.colWidth&&(this.minCols=Math.max(this.minCols,Math.ceil(this.minWidth/this.colWidth))),this.minHeight>this.rowHeight&&(this.minRows=Math.max(this.minRows,Math.ceil(this.minHeight/this.rowHeight))),this._maxCols>0&&this.minCols>this._maxCols&&(this.minCols=1),this._maxRows>0&&this.minRows>this._maxRows&&(this.minRows=1),this._updateRatio(),this._items.forEach(function(t){e._removeFromGrid(t),t.setCascadeMode(e.cascade)}),this._items.forEach(function(t){t.recalculateSelf(),e._addToGrid(t)}),this._cascadeGrid(),this._updateSize()},t.prototype.getItemPosition=function(t){return this._items.has(t)?this._items.get(t).getGridPosition():null},t.prototype.getItemSize=function(t){return this._items.has(t)?this._items.get(t).getSize():null},t.prototype.ngDoCheck=function(){if(null!=this._differ){var t=this._differ.diff(this._config);if(null!=t)return this._applyChanges(t),!0}return!1},t.prototype.setMargins=function(t){this.marginTop=Math.max(parseInt(t[0],10),0),this.marginRight=t.length>=2?Math.max(parseInt(t[1],10),0):this.marginTop,this.marginBottom=t.length>=3?Math.max(parseInt(t[2],10),0):this.marginTop,this.marginLeft=t.length>=4?Math.max(parseInt(t[3],10),0):this.marginRight},t.prototype.enableDrag=function(){this.dragEnable=!0},t.prototype.disableDrag=function(){this.dragEnable=!1},t.prototype.enableResize=function(){this.resizeEnable=!0},t.prototype.disableResize=function(){this.resizeEnable=!1},t.prototype.addItem=function(t){var e=this;if(t.setCascadeMode(this.cascade),!this._preferNew){var n=this._fixGridPosition(t.getGridPosition(),t.getSize());t.setGridPosition(n)}(null===t.uid||this._items.has(t.uid))&&(t.uid=this.generateItemUid()),this._items.set(t.uid,t),this._addToGrid(t),this._updateSize(),this.triggerCascade().then(function(){t.recalculateSelf(),t.onCascadeEvent(),e._emitOnItemChange()})},t.prototype.removeItem=function(t){var e=this;this._removeFromGrid(t),this._items.delete(t.uid),this._destroyed||this.triggerCascade().then(function(){e._updateSize(),e._items.forEach(function(t){return t.recalculateSelf()}),e._emitOnItemChange()})},t.prototype.updateItem=function(t){var e=this;this._removeFromGrid(t),this._addToGrid(t),this.triggerCascade().then(function(){e._updateSize(),t.onCascadeEvent()})},t.prototype.triggerCascade=function(){var t=this;return this._cascadePromise||(this._cascadePromise=new Promise(function(e){setTimeout(function(){t._cascadePromise=null,t._cascadeGrid(null,null),e()},0)})),this._cascadePromise},t.prototype.triggerResize=function(){this.resizeEventHandler(null)},t.prototype.resizeEventHandler=function(t){if(this._calculateColWidth(),this._calculateRowHeight(),this._updateRatio(),this._limitToScreen){var e=this._getContainerColumns();this._maxCols!==e&&(this._maxCols=e,this._updatePositionsAfterMaxChange(),this._cascadeGrid()),this._centerToScreen&&(this.screenMargin=this._getScreenMargin(),this._items.forEach(function(t){t.recalculateSelf()}))}else this._autoResize&&this._items.forEach(function(t){t.recalculateSelf()});this._updateSize()},t.prototype.mouseDownEventHandler=function(t){var e=this._getMousePosition(t),n=this._getItemFromPosition(e);if(null!=n){var i=n.canResize(t);if(this.resizeEnable&&i)this._resizeReady=!0,this._resizingItem=n,this._resizeDirection=i,t.preventDefault();else if(this.dragEnable&&n.canDrag(t)){this._dragReady=!0,this._draggingItem=n;var l=n.getPosition();this._posOffset={left:e.left-l.left,top:e.top-l.top},t.preventDefault()}}},t.prototype.mouseUpEventHandler=function(t){this.isDragging?this._dragStop(t):this.isResizing?this._resizeStop(t):(this._dragReady||this._resizeReady)&&(this._cleanDrag(),this._cleanResize())},t.prototype.mouseMoveEventHandler=function(t){if(this._resizeReady)return this._resizeStart(t),void t.preventDefault();if(this._dragReady)return this._dragStart(t),void t.preventDefault();if(this.isDragging)this._drag(t);else if(this.isResizing)this._resize(t);else{var e=this._getMousePosition(t),n=this._getItemFromPosition(e);n&&n.onMouseMove(t)}},t.prototype._getFixDirectionFromCascade=function(){switch(this.cascade){case"up":case"down":default:return"vertical";case"left":case"right":return"horizontal"}},t.prototype._updatePositionsAfterMaxChange=function(){var t=this;this._items.forEach(function(e){var n=e.getGridPosition(),i=e.getSize();if(!(!t._hasGridCollision(n,i)&&t._isWithinBounds(n,i)&&i.x<=t._maxCols&&i.y<=t._maxRows)){if(t._removeFromGrid(e),t._maxCols>0&&i.x>t._maxCols?(i.x=t._maxCols,e.setSize(i)):t._maxRows>0&&i.y>t._maxRows&&(i.y=t._maxRows,e.setSize(i)),t._hasGridCollision(n,i)||!t._isWithinBounds(n,i,!0)){var l=t._fixGridPosition(n,i);e.setGridPosition(l)}t._addToGrid(e)}})},t.prototype._calculateColWidth=function(){if(this._autoResize&&(this._maxCols>0||this._visibleCols>0)){var t=this._maxCols>0?this._maxCols:this._visibleCols,e=this._ngEl.nativeElement.getBoundingClientRect().width,n=Math.floor(e/t);(n-=this.marginLeft+this.marginRight)>0&&(this.colWidth=n)}(this.colWidth<this.minWidth||this.minCols>this._config.min_cols)&&(this.minCols=Math.max(this._config.min_cols,Math.ceil(this.minWidth/this.colWidth)))},t.prototype._calculateRowHeight=function(){if(this._autoResize&&(this._maxRows>0||this._visibleRows>0)){var t,e=this._maxRows>0?this._maxRows:this._visibleRows;t=this._elementBasedDynamicRowHeight?this._ngEl.nativeElement.getBoundingClientRect().height:window.innerHeight-this.marginTop-this.marginBottom;var n=Math.max(Math.floor(t/e),this.minHeight);(n-=this.marginTop+this.marginBottom)>0&&(this.rowHeight=n)}(this.rowHeight<this.minHeight||this.minRows>this._config.min_rows)&&(this.minRows=Math.max(this._config.min_rows,Math.ceil(this.minHeight/this.rowHeight)))},t.prototype._updateRatio=function(){this._autoResize&&this._maintainRatio&&(this._maxCols>0&&this._visibleRows<=0?this.rowHeight=this.colWidth/this._aspectRatio:this._maxRows>0&&this._visibleCols<=0?this.colWidth=this._aspectRatio*this.rowHeight:0===this._maxCols&&0===this._maxRows&&(this._visibleCols>0?this.rowHeight=this.colWidth/this._aspectRatio:this._visibleRows>0&&(this.colWidth=this._aspectRatio*this.rowHeight)))},t.prototype._applyChanges=function(t){var e=this;t.forEachAddedItem(function(t){e._config[t.key]=t.currentValue}),t.forEachChangedItem(function(t){e._config[t.key]=t.currentValue}),t.forEachRemovedItem(function(t){delete e._config[t.key]}),this.setConfig(this._config)},t.prototype._resizeStart=function(t){this.resizeEnable&&this._resizingItem&&(this._resizingItem.startMoving(),this._removeFromGrid(this._resizingItem),this._createPlaceholder(this._resizingItem),this._allowOverlap&&(this._resizingItem.zIndex=this._lastZValue++),this.isResizing=!0,this._resizeReady=!1,this.onResizeStart.emit(this._resizingItem),this._resizingItem.onResizeStartEvent())},t.prototype._dragStart=function(t){this.dragEnable&&this._draggingItem&&(this._draggingItem.startMoving(),this._removeFromGrid(this._draggingItem),this._createPlaceholder(this._draggingItem),this._allowOverlap&&(this._draggingItem.zIndex=this._lastZValue++),this.isDragging=!0,this._dragReady=!1,this.onDragStart.emit(this._draggingItem),this._draggingItem.onDragStartEvent(),this._zoomOnDrag&&this._zoomOut())},t.prototype._zoomOut=function(){this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","scale(0.5, 0.5)")},t.prototype._resetZoom=function(){this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","")},t.prototype._drag=function(t){if(this.isDragging){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();var e=this._getMousePosition(t),n=e.left-this._posOffset.left,i=e.top-this._posOffset.top,l=this._draggingItem.getGridPosition(),o=this._calculateGridPosition(n,i),s=this._draggingItem.getSize();o=this._fixPosToBoundsX(o,s),this._isWithinBoundsY(o,s)||(o=this._fixPosToBoundsY(o,s)),o.col===l.col&&o.row===l.row||(this._draggingItem.setGridPosition(o,this._fixToGrid),this._placeholderRef.instance.setGridPosition(o),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(o,s),this._cascadeGrid(o,s))),this._fixToGrid||this._draggingItem.setPosition(n,i),this.onDrag.emit(this._draggingItem),this._draggingItem.onDragEvent()}},t.prototype._resize=function(t){if(this.isResizing){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();var e=this._getMousePosition(t),n=this._resizingItem.getPosition(),i=this._resizingItem.getDimensions(),l=n.left+i.width,o=n.top+i.height,s=this._resizeDirection.includes("top"),r=this._resizeDirection.includes("bottom"),a=this._resizeDirection.includes("left"),u=this._resizeDirection.includes("right")?e.left-n.left+1:a?l-e.left+1:i.width,d=r?e.top-n.top+1:s?o-e.top+1:i.height;u<this.minWidth&&(u=this.minWidth),d<this.minHeight&&(d=this.minHeight),u<this._resizingItem.minWidth&&(u=this._resizingItem.minWidth),d<this._resizingItem.minHeight&&(d=this._resizingItem.minHeight);var c=n.left,h=n.top;a&&(c=l-u),s&&(h=o-d);var g=this._calculateGridSize(u,d),p=this._resizingItem.getSize(),m=this._resizingItem.getGridPosition(),f=m.col+p.x,_=m.row+p.y,v=Object.assign({},m);this._resizeDirection.includes("top")&&(v.row=_-g.y),this._resizeDirection.includes("left")&&(v.col=f-g.x),this._isWithinBoundsX(v,g)||(g=this._fixSizeToBoundsX(v,g)),this._isWithinBoundsY(v,g)||(g=this._fixSizeToBoundsY(v,g)),(g=this._resizingItem.fixResize(g)).x===p.x&&g.y===p.y||(this._resizingItem.setGridPosition(v,this._fixToGrid),this._placeholderRef.instance.setGridPosition(v),this._resizingItem.setSize(g,this._fixToGrid),this._placeholderRef.instance.setSize(g),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(v,g),this._cascadeGrid(v,g))),this._fixToGrid||(this._resizingItem.setDimensions(u,d),this._resizingItem.setPosition(c,h)),this.onResize.emit(this._resizingItem),this._resizingItem.onResizeEvent()}},t.prototype._dragStop=function(t){if(this.isDragging){this.isDragging=!1;var e=this._draggingItem.getGridPosition();this._draggingItem.setGridPosition(e),this._addToGrid(this._draggingItem),this._cascadeGrid(),this._updateSize(),this._draggingItem.stopMoving(),this._draggingItem.onDragStopEvent(),this.onDragStop.emit(this._draggingItem),this._cleanDrag(),this._placeholderRef.destroy(),this._emitOnItemChange(),this._zoomOnDrag&&this._resetZoom()}},t.prototype._resizeStop=function(t){if(this.isResizing){this.isResizing=!1;var e=this._resizingItem.getSize();this._resizingItem.setSize(e);var n=this._resizingItem.getGridPosition();this._resizingItem.setGridPosition(n),this._addToGrid(this._resizingItem),this._cascadeGrid(),this._updateSize(),this._resizingItem.stopMoving(),this._resizingItem.onResizeStopEvent(),this.onResizeStop.emit(this._resizingItem),this._cleanResize(),this._placeholderRef.destroy(),this._emitOnItemChange()}},t.prototype._cleanDrag=function(){this._draggingItem=null,this._posOffset=null,this.isDragging=!1,this._dragReady=!1},t.prototype._cleanResize=function(){this._resizingItem=null,this._resizeDirection=null,this.isResizing=!1,this._resizeReady=!1},t.prototype._calculateGridSize=function(t,e){e+=this.marginTop+this.marginBottom;var n=Math.max(this.minCols,Math.round((t+=this.marginLeft+this.marginRight)/(this.colWidth+this.marginLeft+this.marginRight))),i=Math.max(this.minRows,Math.round(e/(this.rowHeight+this.marginTop+this.marginBottom)));return this._isWithinBoundsX({col:1,row:1},{x:n,y:i})||(n=this._maxCols),this._isWithinBoundsY({col:1,row:1},{x:n,y:i})||(i=this._maxRows),{x:n,y:i}},t.prototype._calculateGridPosition=function(t,e){var n=Math.max(1,Math.round(t/(this.colWidth+this.marginLeft+this.marginRight))+1),i=Math.max(1,Math.round(e/(this.rowHeight+this.marginTop+this.marginBottom))+1);return this._isWithinBoundsX({col:n,row:i},{x:1,y:1})||(n=this._maxCols),this._isWithinBoundsY({col:n,row:i},{x:1,y:1})||(i=this._maxRows),{col:n,row:i}},t.prototype._hasGridCollision=function(t,e){var n=this._getCollisions(t,e);return null!=n&&0!==n.length&&n.some(function(t){return!(null===t)})},t.prototype._getCollisions=function(t,e){var n=this;if(this._allowOverlap)return[];var i=[];t.col||(t.col=1),t.row||(t.row=1);var l=t.col,o=t.col+e.x,s=t.row,r=t.row+e.y;return this._itemsInGrid.forEach(function(t){var e=n._items.get(t);e?l<e.col+e.sizex&&e.col<o&&s<e.row+e.sizey&&e.row<r&&i.push(e):n._itemsInGrid.delete(t)}),i},t.prototype._fixGridCollisions=function(t,e){var n,i,o=this._getCollisions(t,e);if(0!==o.length){try{for(var s=Object(l.__values)(o),r=s.next();!r.done;r=s.next()){var a=r.value;this._removeFromGrid(a);var u=a.getSize(),d=a.getGridPosition(),c={col:d.col,row:d.row};"vertical"===this._collisionFixDirection?(c.row=t.row+e.y,this._isWithinBoundsY(c,u)||(c.col=t.col+e.x,c.row=1)):"horizontal"===this._collisionFixDirection&&(c.col=t.col+e.x,this._isWithinBoundsX(c,u)||(c.col=1,c.row=t.row+e.y)),a.setGridPosition(c),this._fixGridCollisions(c,u),this._addToGrid(a),a.onCascadeEvent()}}catch(h){n={error:h}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this._fixGridCollisions(t,e)}},t.prototype._cascadeGrid=function(t,e){var n,i,o,s,a=this;if(!this._destroyed&&!this._allowOverlap){if(!t!=!e)throw new Error("Cannot cascade with only position and not dimensions");this.isDragging&&this._draggingItem&&!t&&!e?(t=this._draggingItem.getGridPosition(),e=this._draggingItem.getSize()):this.isResizing&&this._resizingItem&&!t&&!e&&(t=this._resizingItem.getGridPosition(),e=this._resizingItem.getSize());var u=Array.from(this._itemsInGrid,function(t){return a._items.get(t)});switch(this.cascade){case"up":case"down":u=u.sort(r.sortItemsByPositionVertical);var d=new Map;try{for(var c=Object(l.__values)(u),h=c.next();!h.done;h=c.next())if(!(x=h.value).isFixed){for(var g=x.getSize(),p=x.getGridPosition(),m=d.get(p.col)||1,f=1;f<g.x;f++){var _=d.get(p.col+f)||1;m=Math.max(_,m)}t&&e&&p.col+g.x>t.col&&p.col<t.col+e.x&&(g.y<=t.row-m||(m=Math.max(m,t.row+e.y)));var v={col:p.col,row:m};for(m!==p.row&&this._isWithinBoundsY(v,g)&&(this._removeFromGrid(x),x.setGridPosition(v),x.onCascadeEvent(),this._addToGrid(x)),f=0;f<g.x;f++)d.set(p.col+f,m+g.y)}}catch(E){n={error:E}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}break;case"left":case"right":u=u.sort(r.sortItemsByPositionHorizontal);var y=new Map;try{for(var C=Object(l.__values)(u),b=C.next();!b.done;b=C.next()){g=(x=b.value).getSize(),p=x.getGridPosition();var x,w=y.get(p.row)||1;for(f=1;f<g.y;f++){var S=y.get(p.row+f)||1;w=Math.max(S,w)}for(t&&e&&p.row+g.y>t.col&&p.row<t.col+e.x&&(g.x<=t.col-w||(w=Math.max(w,t.col+e.x))),v={col:w,row:p.row},w!==p.col&&this._isWithinBoundsX(v,g)&&(this._removeFromGrid(x),x.setGridPosition(v),x.onCascadeEvent(),this._addToGrid(x)),f=0;f<g.y;f++)y.set(p.row+f,w+g.x)}}catch(R){o={error:R}}finally{try{b&&!b.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}}}},t.prototype._fixGridPosition=function(t,e){if(!this._hasGridCollision(t,e))return t;var n=this._maxRows,i=this._getMaxRow(),l=this._maxCols,o=this._getMaxCol(),s={col:t.col,row:t.row};if(0===l&&e.y>=n)s.col=o+1,s.row=1;else if(0===n&&e.x>=l)s.row=i+1,s.col=1;else if("vertical"===this._itemFixDirection)if(0===n){var r=this._getItemsInVerticalPath(s,e,s.row);s.row=this._getNextFittingRow(s,e,r)}else for(;s.col<=o;){r=this._getItemsInVerticalPath(s,e,s.row);var a=this._getNextFittingRow(s,e,r);if(n-a>=e.y){s.row=a;break}s.col=Math.max(s.col+1,Math.min.apply(Math,r.map(function(t){return t.col+t.sizex}))),s.row=1}else if("horizontal"===this._itemFixDirection)if(0===l)r=this._getItemsInHorizontalPath(s,e,s.row),s.col=this._getNextFittingCol(s,e,r);else for(;s.row<=i;){r=this._getItemsInHorizontalPath(s,e,s.col);var u=this._getNextFittingCol(s,e,r);if(l-u>=e.x){s.col=u;break}s.row=Math.max(s.row+1,Math.min.apply(Math,r.map(function(t){return t.row+t.sizey}))),s.col=1}return s},t.prototype._getNextFittingRow=function(t,e,n){var i,o,s=t.row;try{for(var r=Object(l.__values)(n),a=r.next();!a.done;a=r.next()){var u=a.value;if(u.row-s>=e.y)return s;s=u.row+u.sizey}}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s},t.prototype._getNextFittingCol=function(t,e,n){var i,o,s=t.col;try{for(var r=Object(l.__values)(n),a=r.next();!a.done;a=r.next()){var u=a.value;if(u.col-s>=e.x)return s;s=u.col+u.sizex}}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s},t.prototype._getItemsInHorizontalPath=function(t,e,n){var i=this;void 0===n&&(n=0);var l=[],o=t.row+e.y-1;return this._itemsInGrid.forEach(function(e){var s=i._items.get(e);s.col+s.sizex-1<n||s.row>o||s.row+s.sizey-1<t.row||l.push(s)}),l},t.prototype._getItemsInVerticalPath=function(t,e,n){var i=this;void 0===n&&(n=0);var l=[],o=t.col+e.x-1;return this._itemsInGrid.forEach(function(e){var s=i._items.get(e);s.row+s.sizey-1<n||s.col>o||s.col+s.sizex-1<t.col||l.push(s)}),l},t.prototype._isWithinBoundsX=function(t,e,n){return void 0===n&&(n=!1),0===this._maxCols||n&&1===t.col||t.col+e.x-1<=this._maxCols},t.prototype._fixPosToBoundsX=function(t,e){return this._isWithinBoundsX(t,e)||(t.col=Math.max(this._maxCols-(e.x-1),1),t.row++),t},t.prototype._fixSizeToBoundsX=function(t,e){return this._isWithinBoundsX(t,e)||(e.x=Math.max(this._maxCols-(t.col-1),1),e.y++),e},t.prototype._isWithinBoundsY=function(t,e,n){return void 0===n&&(n=!1),0===this._maxRows||n&&1===t.row||t.row+e.y-1<=this._maxRows},t.prototype._fixPosToBoundsY=function(t,e){return this._isWithinBoundsY(t,e)||(t.row=Math.max(this._maxRows-(e.y-1),1),t.col++),t},t.prototype._fixSizeToBoundsY=function(t,e){return this._isWithinBoundsY(t,e)||(e.y=Math.max(this._maxRows-(t.row-1),1),e.x++),e},t.prototype._isWithinBounds=function(t,e,n){return void 0===n&&(n=!1),this._isWithinBoundsX(t,e,n)&&this._isWithinBoundsY(t,e,n)},t.prototype._addToGrid=function(t){var e=t.getGridPosition(),n=t.getSize();this._hasGridCollision(e,n)&&(this._fixGridCollisions(e,n),e=t.getGridPosition()),this._allowOverlap&&(t.zIndex=this._lastZValue++),this._itemsInGrid.add(t.uid)},t.prototype._removeFromGrid=function(t){this._itemsInGrid.delete(t.uid)},t.prototype._updateSize=function(){if(!this._destroyed){var t=this._getMaxCol(),e=this._getMaxRow();t===this._curMaxCol&&e===this._curMaxRow||(this._curMaxCol=t,this._curMaxRow=e),this._renderer.setElementStyle(this._ngEl.nativeElement,"width","100%"),this._elementBasedDynamicRowHeight||this._renderer.setElementStyle(this._ngEl.nativeElement,"height",e*(this.rowHeight+this.marginTop+this.marginBottom)+"px")}},t.prototype._getMaxRow=function(){var t=this,e=Array.from(this._itemsInGrid,function(e){var n=t._items.get(e);return n?n.row+n.sizey-1:0});return Math.max.apply(null,e)},t.prototype._getMaxCol=function(){var t=this,e=Array.from(this._itemsInGrid,function(e){var n=t._items.get(e);return n?n.col+n.sizex-1:0});return Math.max.apply(null,e)},t.prototype._getMousePosition=function(t){(window.TouchEvent&&t instanceof TouchEvent||t.touches||t.changedTouches)&&(t=t.touches.length>0?t.touches[0]:t.changedTouches[0]);var e=this._ngEl.nativeElement.getBoundingClientRect(),n=t.clientX-e.left,i=t.clientY-e.top;return"down"===this.cascade&&(i=e.top+e.height-t.clientY),"right"===this.cascade&&(n=e.left+e.width-t.clientX),this.isDragging&&this._zoomOnDrag&&(n*=2,i*=2),{left:n,top:i}},t.prototype._getContainerColumns=function(){var t=this._ngEl.nativeElement.getBoundingClientRect().width;return Math.floor(t/(this.colWidth+this.marginLeft+this.marginRight))},t.prototype._getScreenMargin=function(){var t=this._ngEl.nativeElement.getBoundingClientRect().width;return Math.floor((t-this._maxCols*(this.colWidth+this.marginLeft+this.marginRight))/2)},t.prototype._getItemFromPosition=function(t){var e=this;return Array.from(this._itemsInGrid,function(t){return e._items.get(t)}).sort(function(t,e){return e.zIndex-t.zIndex}).find(function(e){if(!e)return!1;var n=e.getDimensions(),i=e.getPosition();return t.left>=i.left&&t.left<i.left+n.width&&t.top>=i.top&&t.top<i.top+n.height})},t.prototype._createPlaceholder=function(t){var e=t.getGridPosition(),n=t.getSize(),i=this.componentFactoryResolver.resolveComponentFactory(s),l=t.containerRef.createComponent(i);this._placeholderRef=l;var o=l.instance;o.registerGrid(this),o.setCascadeMode(this.cascade),o.setGridPosition({col:e.col,row:e.row}),o.setSize({x:n.x,y:n.y})},t.prototype._emitOnItemChange=function(){var t=this,e=Array.from(this._itemsInGrid).map(function(e){return t._items.get(e)}).filter(function(t){return!!t}).map(function(t){return t.getEventOutput()});this.onItemChange.emit(e)},t.prototype._defineListeners=function(){var t=this._ngEl.nativeElement;this._documentMousemove$=Object(i.a)(document,"mousemove"),this._documentMouseup$=Object(i.a)(document,"mouseup"),this._mousedown$=Object(i.a)(t,"mousedown"),this._mousemove$=Object(i.a)(t,"mousemove"),this._mouseup$=Object(i.a)(t,"mouseup"),this._touchstart$=Object(i.a)(t,"touchstart"),this._touchmove$=Object(i.a)(t,"touchmove"),this._touchend$=Object(i.a)(t,"touchend")},t.prototype._enableListeners=function(){this._enabledListener||(this._enableMouseListeners(),this._isTouchDevice()&&this._enableTouchListeners(),this._enabledListener=!0)},t.prototype._disableListeners=function(){this._subscriptions.forEach(function(t){return t.unsubscribe()}),this._enabledListener=!1},t.prototype._isTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0},t.prototype._enableTouchListeners=function(){var t=this,e=this._touchstart$.subscribe(function(e){return t.mouseDownEventHandler(e)}),n=this._touchmove$.subscribe(function(e){return t.mouseMoveEventHandler(e)}),i=this._touchend$.subscribe(function(e){return t.mouseUpEventHandler(e)});this._subscriptions.push(e,n,i)},t.prototype._enableMouseListeners=function(){var t=this,e=this._documentMousemove$.subscribe(function(e){return t.mouseMoveEventHandler(e)}),n=this._documentMouseup$.subscribe(function(e){return t.mouseUpEventHandler(e)}),i=this._mousedown$.subscribe(function(e){return t.mouseDownEventHandler(e)}),l=this._mousemove$.subscribe(function(e){return t.mouseMoveEventHandler(e)}),o=this._mouseup$.subscribe(function(e){return t.mouseUpEventHandler(e)});this._subscriptions.push(e,n,i,l,o)},t.CONST_DEFAULT_CONFIG={margins:[10],draggable:!0,resizable:!0,max_cols:0,max_rows:0,visible_cols:0,visible_rows:0,col_width:250,row_height:250,cascade:"up",min_width:100,min_height:100,fix_to_grid:!1,auto_style:!0,auto_resize:!1,maintain_ratio:!1,prefer_new:!1,zoom_on_drag:!1,limit_to_screen:!1,center_to_screen:!1,resize_directions:t.CONST_DEFAULT_RESIZE_DIRECTIONS=["bottomright","bottomleft","topright","topleft","right","left","bottom","top"],element_based_row_height:!1,fix_item_position_direction:"cascade",fix_collision_position_direction:"cascade",allow_overlap:!1},t}(),u=function(){function t(e,n,i,l,s){this._differs=e,this._ngEl=n,this._renderer=i,this._ngGrid=l,this.containerRef=s,this.onItemChange=new o.EventEmitter(!1),this.onDragStart=new o.EventEmitter,this.onDrag=new o.EventEmitter,this.onDragStop=new o.EventEmitter,this.onDragAny=new o.EventEmitter,this.onResizeStart=new o.EventEmitter,this.onResize=new o.EventEmitter,this.onResizeStop=new o.EventEmitter,this.onResizeAny=new o.EventEmitter,this.onChangeStart=new o.EventEmitter,this.onChange=new o.EventEmitter,this.onChangeStop=new o.EventEmitter,this.onChangeAny=new o.EventEmitter,this.ngGridItemChange=new o.EventEmitter,this.isFixed=!1,this.isDraggable=!0,this.isResizable=!0,this.minWidth=0,this.minHeight=0,this.uid=null,this._currentPosition={col:1,row:1},this._size={x:1,y:1},this._config=t.CONST_DEFAULT_CONFIG,this._userConfig=null,this._dragHandle=null,this._resizeHandle=null,this._borderSize=25,this._added=!1,this._maxCols=0,this._minCols=0,this._maxRows=0,this._minRows=0,this._resizeDirections=[],this._zIndex=0}return Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._renderer.setElementStyle(this._ngEl.nativeElement,"z-index",t.toString()),this._zIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{set:function(e){this._userConfig=e;var n=Object.assign({},t.CONST_DEFAULT_CONFIG,e);for(var i in t.CONST_DEFAULT_CONFIG)null==n[i]&&(n[i]=t.CONST_DEFAULT_CONFIG[i]);this.setConfig(n),null!=this._userConfig&&(null==this._differ&&(this._differ=this._differs.find(this._userConfig).create()),this._differ.diff(this._userConfig)),this._added||(this._added=!0,this._ngGrid.addItem(this)),this._recalculateDimensions(),this._recalculatePosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizex",{get:function(){return this._size.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizey",{get:function(){return this._size.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._currentPosition.col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._currentPosition.row},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentCol",{get:function(){return this._currentPosition.col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRow",{get:function(){return this._currentPosition.row},enumerable:!0,configurable:!0}),t.prototype.onResizeStartEvent=function(){var t=this.getEventOutput();this.onResizeStart.emit(t),this.onResizeAny.emit(t),this.onChangeStart.emit(t),this.onChangeAny.emit(t)},t.prototype.onResizeEvent=function(){var t=this.getEventOutput();this.onResize.emit(t),this.onResizeAny.emit(t),this.onChange.emit(t),this.onChangeAny.emit(t)},t.prototype.onResizeStopEvent=function(){var t=this.getEventOutput();this.onResizeStop.emit(t),this.onResizeAny.emit(t),this.onChangeStop.emit(t),this.onChangeAny.emit(t),this.onConfigChangeEvent()},t.prototype.onDragStartEvent=function(){var t=this.getEventOutput();this.onDragStart.emit(t),this.onDragAny.emit(t),this.onChangeStart.emit(t),this.onChangeAny.emit(t)},t.prototype.onDragEvent=function(){var t=this.getEventOutput();this.onDrag.emit(t),this.onDragAny.emit(t),this.onChange.emit(t),this.onChangeAny.emit(t)},t.prototype.onDragStopEvent=function(){var t=this.getEventOutput();this.onDragStop.emit(t),this.onDragAny.emit(t),this.onChangeStop.emit(t),this.onChangeAny.emit(t),this.onConfigChangeEvent()},t.prototype.onCascadeEvent=function(){this.onConfigChangeEvent()},t.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid-item",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","absolute"),this._recalculateDimensions(),this._recalculatePosition(),this._added||(this._added=!0,this._ngGrid.addItem(this))},t.prototype.canDrag=function(t){return!!this.isDraggable&&(!this._dragHandle||this.findHandle(this._dragHandle,t.target))},t.prototype.findHandle=function(t,e){try{for(var n=e;n&&n!==this._ngEl.nativeElement;){if(this.elementMatches(n,t))return!0;n=n.parentElement}}catch(i){}return!1},t.prototype.canResize=function(t){var e,n,i,o;if(!this.isResizable)return null;if(this._resizeHandle){if("string"==typeof this._resizeHandle)return this.findHandle(this._resizeHandle,t.target)?"bottomright":null;if("object"!=typeof this._resizeHandle)return null;try{for(var s=Object(l.__values)(this._resizeDirections),r=s.next();!r.done;r=s.next())if((c=r.value)in this._resizeHandle&&this.findHandle(this._resizeHandle[c],t.target))return c}catch(h){e={error:h}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return null}if(this._borderSize<=0)return null;var a=this._getMousePosition(t);try{for(var u=Object(l.__values)(this._resizeDirections),d=u.next();!d.done;d=u.next()){var c;if(this.canResizeInDirection(c=d.value,a))return c}}catch(g){i={error:g}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return null},t.prototype.onMouseMove=function(t){if(this._ngGrid.autoStyle)if(this._ngGrid.resizeEnable){var e="default";switch(this.canResize(t)){case"bottomright":case"topleft":e="nwse-resize";break;case"topright":case"bottomleft":e="nesw-resize";break;case"top":case"bottom":e="ns-resize";break;case"left":case"right":e="ew-resize";break;default:this._ngGrid.dragEnable&&this.canDrag(t)&&(e="move")}this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor",e)}else this._ngGrid.dragEnable&&this.canDrag(t)?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","move"):this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","default")},t.prototype.ngOnDestroy=function(){this._added&&this._ngGrid.removeItem(this)},t.prototype.getElement=function(){return this._ngEl},t.prototype.getDragHandle=function(){return this._dragHandle},t.prototype.getResizeHandle=function(){return this._resizeHandle},t.prototype.getDimensions=function(){return{width:this._elemWidth,height:this._elemHeight}},t.prototype.getSize=function(){return this._size},t.prototype.getPosition=function(){return{left:this._elemLeft,top:this._elemTop}},t.prototype.getGridPosition=function(){return this._currentPosition},t.prototype.setConfig=function(e){this._config=e,this._payload=e.payload,this._currentPosition.col=e.col?e.col:t.CONST_DEFAULT_CONFIG.col,this._currentPosition.row=e.row?e.row:t.CONST_DEFAULT_CONFIG.row,this._size.x=e.sizex?e.sizex:t.CONST_DEFAULT_CONFIG.sizex,this._size.y=e.sizey?e.sizey:t.CONST_DEFAULT_CONFIG.sizey,this._dragHandle=e.dragHandle,this._resizeHandle=e.resizeHandle,this._borderSize=e.borderSize,this.isDraggable=!!e.draggable,this.isResizable=!!e.resizable,this.isFixed=!!e.fixed,this._resizeDirections=e.resizeDirections||this._ngGrid.resizeDirections,this._maxCols=!isNaN(e.maxCols)&&isFinite(e.maxCols)?e.maxCols:0,this._minCols=!isNaN(e.minCols)&&isFinite(e.minCols)?e.minCols:0,this._maxRows=!isNaN(e.maxRows)&&isFinite(e.maxRows)?e.maxRows:0,this._minRows=!isNaN(e.minRows)&&isFinite(e.minRows)?e.minRows:0,this.minWidth=!isNaN(e.minWidth)&&isFinite(e.minWidth)?e.minWidth:0,this.minHeight=!isNaN(e.minHeight)&&isFinite(e.minHeight)?e.minHeight:0,this._minCols>0&&this._maxCols>0&&this._minCols>this._maxCols&&(this._minCols=0),this._minRows>0&&this._maxRows>0&&this._minRows>this._maxRows&&(this._minRows=0),this._added&&this._ngGrid.updateItem(this),this._size=this.fixResize(this._size),this._recalculatePosition(),this._recalculateDimensions()},t.prototype.ngDoCheck=function(){if(null!=this._differ){var t=this._differ.diff(this._userConfig);if(null!=t)return this._applyChanges(t)}return!1},t.prototype.setSize=function(t,e){void 0===e&&(e=!0),t=this.fixResize(t),this._size=t,e&&this._recalculateDimensions(),this.onItemChange.emit(this.getEventOutput())},t.prototype.setGridPosition=function(t,e){void 0===e&&(e=!0),this._currentPosition=t,e&&this._recalculatePosition(),this.onItemChange.emit(this.getEventOutput())},t.prototype.getEventOutput=function(){return{col:this._currentPosition.col,height:this._elemHeight,left:this._elemLeft,payload:this._payload,row:this._currentPosition.row,sizex:this._size.x,sizey:this._size.y,top:this._elemTop,uid:this.uid,width:this._elemWidth}},t.prototype.setPosition=function(t,e){switch(this._cascadeMode){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left",t+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",e+"px");break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right",t+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",e+"px");break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left",t+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",e+"px")}this._elemLeft=t,this._elemTop=e},t.prototype.setCascadeMode=function(t){switch(this._cascadeMode=t,t){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"left",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",null)}},t.prototype.setDimensions=function(t,e){t<this.minWidth&&(t=this.minWidth),e<this.minHeight&&(e=this.minHeight),this._renderer.setElementStyle(this._ngEl.nativeElement,"width",t+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"height",e+"px"),this._elemWidth=t,this._elemHeight=e},t.prototype.startMoving=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"moving",!0);var t=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"z-index",(parseInt(t.getPropertyValue("z-index"),10)+1).toString())},t.prototype.stopMoving=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"moving",!1);var t=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"z-index",(parseInt(t.getPropertyValue("z-index"),10)-1).toString())},t.prototype.recalculateSelf=function(){this._recalculatePosition(),this._recalculateDimensions()},t.prototype.fixResize=function(t){return this._maxCols>0&&t.x>this._maxCols&&(t.x=this._maxCols),this._maxRows>0&&t.y>this._maxRows&&(t.y=this._maxRows),this._minCols>0&&t.x<this._minCols&&(t.x=this._minCols),this._minRows>0&&t.y<this._minRows&&(t.y=this._minRows),t.x*this._ngGrid.colWidth+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(t.x-1)<this.minWidth&&(t.x=Math.ceil((this.minWidth+this._ngGrid.marginRight+this._ngGrid.marginLeft)/(this._ngGrid.colWidth+this._ngGrid.marginRight+this._ngGrid.marginLeft))),t.y*this._ngGrid.rowHeight+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(t.y-1)<this.minHeight&&(t.y=Math.ceil((this.minHeight+this._ngGrid.marginBottom+this._ngGrid.marginTop)/(this._ngGrid.rowHeight+this._ngGrid.marginBottom+this._ngGrid.marginTop))),t},t.prototype.elementMatches=function(t,e){if(!t)return!1;if(t.matches)return t.matches(e);if(t.oMatchesSelector)return t.oMatchesSelector(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.mozMatchesSelector)return t.mozMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(!t.document||!t.ownerDocument)return!1;for(var n=(t.document||t.ownerDocument).querySelectorAll(e),i=n.length-1;i>=0;i--)if(n.item(i)===t)return!0;return!1},t.prototype._recalculatePosition=function(){this.setPosition((this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._currentPosition.col-1)+this._ngGrid.marginLeft+this._ngGrid.screenMargin,(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._currentPosition.row-1)+this._ngGrid.marginTop)},t.prototype._recalculateDimensions=function(){this._size.x<this._ngGrid.minCols&&(this._size.x=this._ngGrid.minCols),this._size.y<this._ngGrid.minRows&&(this._size.y=this._ngGrid.minRows);var t=this._ngGrid.rowHeight*this._size.y+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._size.y-1),e=Math.max(this.minWidth,this._ngGrid.minWidth,this._ngGrid.colWidth*this._size.x+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._size.x-1)),n=Math.max(this.minHeight,this._ngGrid.minHeight,t);this.setDimensions(e,n)},t.prototype._getMousePosition=function(t){if(t.originalEvent&&t.originalEvent.touches){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches.length?e.changedTouches[0]:t}else t.touches&&(t=t.touches.length?t.touches[0]:t.changedTouches.length?t.changedTouches[0]:t);var n=this._ngEl.nativeElement.getBoundingClientRect();return{left:t.clientX-n.left,top:t.clientY-n.top}},t.prototype._applyChanges=function(t){var e=this,n=!1,i=function(t){e._config[t.key]!==t.currentValue&&(e._config[t.key]=t.currentValue,n=!0)};return t.forEachAddedItem(i),t.forEachChangedItem(i),t.forEachRemovedItem(function(t){n=!0,delete e._config[t.key]}),n&&this.setConfig(this._config),n},t.prototype.onConfigChangeEvent=function(){null!==this._userConfig&&(this._config.sizex=this._userConfig.sizex=this._size.x,this._config.sizey=this._userConfig.sizey=this._size.y,this._config.col=this._userConfig.col=this._currentPosition.col,this._config.row=this._userConfig.row=this._currentPosition.row,this.ngGridItemChange.emit(this._userConfig))},t.prototype.canResizeInDirection=function(t,e){switch(t){case"bottomright":return e.left<this._elemWidth&&e.left>this._elemWidth-this._borderSize&&e.top<this._elemHeight&&e.top>this._elemHeight-this._borderSize;case"bottomleft":return e.left<this._borderSize&&e.top<this._elemHeight&&e.top>this._elemHeight-this._borderSize;case"topright":return e.left<this._elemWidth&&e.left>this._elemWidth-this._borderSize&&e.top<this._borderSize;case"topleft":return e.left<this._borderSize&&e.top<this._borderSize;case"right":return e.left<this._elemWidth&&e.left>this._elemWidth-this._borderSize;case"left":return e.left<this._borderSize;case"bottom":return e.top<this._elemHeight&&e.top>this._elemHeight-this._borderSize;case"top":return e.top<this._borderSize;default:return!1}},t.CONST_DEFAULT_CONFIG={uid:null,col:1,row:1,sizex:1,sizey:1,dragHandle:null,resizeHandle:null,fixed:!1,draggable:!0,resizable:!0,borderSize:25,resizeDirections:null},t}(),d=function(){return function(){}}()},nhkl:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},o0I2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("FYXD"),l=n("VnD/"),o=function(){function t(t){this.route=t}return t.prototype.ngOnInit=function(){this.pageState=this.route.parent.parent.data.pipe(Object(i.a)("content"),Object(l.a)(function(t){return!!t}))},t}()},oaRE:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var i=n("CcnG"),l=n("4aid"),o=n("sdDj"),s=n("g4HV"),r=n("1HPb"),a=(n("m4QD"),i["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function u(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"dot-icon-button",[["tooltipPosition","bottom"]],null,null,null,l.b,l.a)),i["\u0275prd"](512,null,o.DomHandler,o.DomHandler,[]),i["\u0275did"](2,4341760,null,0,s.Tooltip,[i.ElementRef,o.DomHandler,i.NgZone],{tooltipPosition:[0,"tooltipPosition"],text:[1,"text"]},null),i["\u0275did"](3,49152,null,0,r.a,[i.ElementRef],{icon:[0,"icon"]},null)],function(t,e){var n=e.component;t(e,2,0,"bottom",n.tooltipText),t(e,3,0,n.icon)},null)}},pgYj:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},wMrY:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("FYXD"),l=n("sE5F"),o=function(){function t(t){this.coreWebService=t}return t.prototype.get=function(t){return this.coreWebService.requestView({method:l.k.Get,url:"v1/themes/id/"+t}).pipe(Object(i.a)("entity"))},t}()},wse4:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()}}]);